<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="partner_website_listing.PartnerListing">
        <div class="partner-listing">
            <!-- Search and View Toggle -->
            <div class="controls mb-4 d-flex">
                <div class="input-group w-50">
                    <input
                        type="text"
                        class="form-control"
                        placeholder="Search partners..."
                        t-model="state.filter"/>
                </div>
                <div>
                    <button
                        class="btn ms-2" t-att-class="state.view === 'kanban' and 'btn-primary'"
                        t-on-click="toggleView"
                        t-att-disabled="state.view === 'kanban'">
                        <i class="fa fa-th-large me-2"/> Kanban View
                    </button>
                    <button
                        class="btn ms-2" t-att-class="state.view === 'list' and 'btn-primary'"
                        t-on-click="toggleView"
                        t-att-disabled="state.view === 'list'">
                        <i class="fa fa-list me-2"/> List View
                    </button>
                </div>
            </div>
            <!-- Loading State -->
            <div t-if="state.isLoading" class="text-center py-5">
                <div class="spinner-border" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
            <!-- Error State -->
            <div t-if="state.error" class="alert alert-danger" role="alert">
                <t t-esc="state.error"/>
            </div>
            <!-- Kanban View -->
            <div t-if="state.view === 'kanban'" class="row">
                <t t-foreach="filterPartners" t-as="partner" t-key="partner.id">
                    <div class="col-sm-6 col-lg-4 mb-4">
                        <div class="card h-100">
                            <img t-att-src="partner.image_url"
                                 class="card-img-top partner-image"
                                 t-att-alt="partner.name"/>
                            <div class="card-body">
                                <h5 class="card-title" t-esc="partner.name"/>
                                <p t-if="partner.city || partner.country"
                                   class="card-text">
                                    <i class="fa fa-map-marker"/>
                                    <t t-esc="getAddress(partner)"/>
                                </p>
                                <p t-if="partner.email" class="card-text">
                                    <i class="fa fa-envelope"/>
                                    <a t-att-href="'mailto:' + partner.email"
                                       t-esc="partner.email"/>
                                </p>
                                <p t-if="partner.phone" class="card-text">
                                    <i class="fa fa-phone"/>
                                    <a t-att-href="'tel:' + partner.phone"
                                       t-esc="partner.phone"/>
                                </p>
                                <a t-if="partner.website"
                                   t-att-href="partner.website"
                                   class="btn btn-primary mt-2"
                                   target="_blank">
                                    Visit Website
                                </a>
                            </div>
                        </div>
                    </div>
                </t>
            </div>
            <!-- List View -->
            <div t-if="state.view === 'list'" class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Location</th>
                            <th>Contact</th>
                            <th>Website</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="filterPartners" t-as="partner" t-key="partner.id">
                            <tr>
                                <td>
                                    <img t-att-src="partner.image_url"
                                         class="partner-list-image me-2"
                                         t-att-alt="partner.name"/>
                                    <span t-esc="partner.name"/>
                                </td>
                                <t t-esc="getAddress(partner)"/>
                                <td>
                                    <div t-if="partner.email">
                                        <a t-att-href="'mailto:' + partner.email"
                                           t-esc="partner.email"/>
                                    </div>
                                    <div t-if="partner.phone">
                                        <a t-att-href="'tel:' + partner.phone"
                                           t-esc="partner.phone"/>
                                    </div>
                                </td>
                                <td>
                                    <a t-if="partner.website"
                                       t-att-href="partner.website"
                                       target="_blank">
                                        Visit
                                    </a>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </div>
    </t>
</templates>
