<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>

    
    .tabs-container {
      width: 100%;
      margin: 0 auto;
    }

    .horizontal-tab {
      border: none;
      color: #495057;
      font-weight: 500;
      padding: 1rem 2rem;
      background-color: #f0f0f0;
      margin-right: 3px;
      border-radius: 4px 4px 0 0;
      font-size: 1.05rem;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
    }

    .flex-grow-1 {
      flex-grow: 1;
    }

    .horizontal-tab.treatment-plan {
      background-color: #e9f7ef;
      color: #2ecc71;
      border: 2px solid #2ecc71;
      border-radius: 8px;
      padding: 12px 20px;
      font-weight: 600;
      box-shadow: 0 2px 5px rgba(46, 204, 113, 0.2);
      margin-right: 15px;
      position: relative;
      overflow: hidden;
    }

    .horizontal-tab.treatment-plan::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, transparent 20%, rgba(255, 255, 255, 0.3) 25%, transparent 30%);
      transform: translateX(-100%);
      transition: transform 0.6s ease;
    }

    .horizontal-tab.treatment-plan:hover::before {
      transform: translateX(100%);
    }

    .horizontal-tab.treatment-plan:hover {
      background-color: #2ecc71;
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(46, 204, 113, 0.3);
    }

    .horizontal-tab.treatment-plan.active {
      background-color: #27ae60;
      color: white;
      border-color: #27ae60;
      box-shadow: 0 4px 10px rgba(46, 204, 113, 0.4);
    }

    /* Treatment module specific styles */
    #treatment-module .card {
      transition: all 0.3s ease;
      border-color: #e0f2e9;
    }

    #treatment-module .card:hover {
      box-shadow: 0 5px 15px rgba(46, 204, 113, 0.1);
      transform: translateY(-3px);
    }

    #treatment-module .content-title {
      color: #27ae60;
    }

    .horizontal-tab:hover {
      background-color: #e8e8e8;
      border-bottom: 3px solid #dee2e6;
    }

    .horizontal-tab.active {
      color: #816189;
      background-color: #e8e8e8;
      border-bottom: 5px solid #816189;
    }

    .horizontal-tab .shortcut {
      position: absolute;
      top: 5px;
      right: 5px;
      font-size: 12px;
      color: #999;
    }

    /* Content Area */
    .content-area {
      display: flex;
      min-height: 500px;
      position: relative;
      width: 100%;
    }

    /* Vertical Tabs */
    .vertical-tabs {
      width: 250px;
      min-width: 250px;
      padding: 20px 0;
      border-right: 1px solid #eee;
      flex-shrink: 0;
    }

    .vertical-tab {
      display: block;
      width: 100%;
      padding: 15px 25px;
      text-align: left;
      border: none;
      background: none;
      cursor: pointer;
      font-size: 14px;
      color: #555;
      transition: all 0.3s ease;
      margin: 5px 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .vertical-tab:hover {
      color: #7c7bad;
    }

    .vertical-tab.active {
      color: #7c7bad;
      border-left: 3px solid #7c7bad;
      background: rgba(124, 123, 173, 0.05);
      border: 1px solid #7c7bad;
      border-left: 3px solid #7c7bad;
      border-radius: 4px;
    }

    .end-module-tab {
      width: calc(100% - 40px);
      padding: 12px 20px;
      text-align: center;
      background: white;
      cursor: pointer;
      font-size: 14px;
      color: #dc3545;
      transition: all 0.3s ease;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      border: 2px solid #dc3545;
      border-radius: 8px;
      margin: 20px;
      box-shadow: 0 2px 4px rgba(220, 53, 69, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .end-module-tab:hover {
      background-color: #dc3545;
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(220, 53, 69, 0.2);
    }

    .end-module-tab:active {
      transform: translateY(0);
    }

    .end-module-tab i {
      margin-right: 8px;
    }

    /* Content */
    .tab-content {
      display: none;
      padding: 30px;
      flex-grow: 1;
      width: calc(100% - 250px);
      overflow-x: auto;
    }

    .tab-content.active {
      display: block;
      animation: fadeIn 0.3s ease;
    }

    .module-content {
      display: none;
      width: 100%;
    }

    .module-content.active {
      display: block;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    .content-title {
      color: #7c7bad;
      margin-bottom: 20px;
      font-weight: 600;
    }

    /* Custom Task Styles */
    .tasks-section {
      padding: 20px;
    }

    .task-card {
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      margin-bottom: 15px;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .task-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }

    .task-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 10px;
    }

    .task-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: #2c3e50;
      margin: 0;
    }

    .task-checkbox {
      width: 20px;
      height: 20px;
      border: 2px solid #7c7bad;
      border-radius: 4px;
      margin-right: 15px;
      cursor: pointer;
    }

    .task-checkbox:checked {
      background-color: #7c7bad;
      border-color: #7c7bad;
    }

    .task-description {
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 12px;
    }

    .task-image {
      max-width: 200px;
      border-radius: 6px;
      margin-top: 10px;
    }

    .doctor-note {
      background-color: #f8f9fa;
      border-left: 4px solid #7c7bad;
      padding: 10px 15px;
      margin: 10px 0;
      font-size: 0.9rem;
    }

    .comment-btn {
      color: #7c7bad;
      border: 1px solid #7c7bad;
      padding: 4px 12px;
      font-size: 0.85rem;
      border-radius: 4px;
      background: none;
      transition: all 0.2s;
    }

    .comment-btn:hover {
      background-color: #7c7bad;
      color: white;
    }

    .comment-form {
      background-color: #f8f9fa;
      border-radius: 6px;
      padding: 15px;
      margin-top: 15px;
    }

    .file-attachment {
      display: flex;
      align-items: center;
      background-color: #f8f9fa;
      padding: 10px;
      border-radius: 6px;
      margin-top: 10px;
    }

    .file-icon {
      color: #7c7bad;
      font-size: 1.5rem;
      margin-right: 10px;
    }

    .file-info {
      flex-grow: 1;
    }

    .file-name {
      font-weight: 500;
      font-size: 0.9rem;
    }

    .file-meta {
      font-size: 0.8rem;
      color: #666;
    }

    .chart-container {
      background-color: white;
      border-radius: 6px;
      padding: 15px;
      margin-top: 15px;
      height: 400px;
      width: 100%;
      position: relative;
    }

    canvas {
      max-height: 370px !important;
    }

    .psychoeducation-module {
      border-left-color: #20c997;
    }

    .completed-task {
      opacity: 0.7;
    }

    .completed-task .task-title {
      text-decoration: line-through;
    }

    /* Session Info Styles */
    .session-block {
      margin-bottom: 2rem;
      padding: 1rem;
      border-bottom: 1px solid #eee;
    }

    .session-title {
      color: #2c3e50;
      font-size: 1.2rem;
      margin-bottom: 1rem;
    }

    .activities-list {
      list-style: none;
      padding: 0;
      margin: 1rem 0;
    }

    .activity-item {
      padding: 0.5rem;
      margin-bottom: 0.5rem;
      background: #f8f9fa;
      border-left: 3px solid #7c7bad;
      border-radius: 4px;
    }

    /* Add Bootstrap classes support for activity items */
    .border-start-custom {
      border-left: 3px solid #7c7bad !important;
    }

    .bg-light-custom {
      background-color: #f8f9fa !important;
    }

    .trigger-table {
      width: 100%;
      margin-top: 1rem;
      border-collapse: collapse;
    }

    .trigger-table th,
    .trigger-table td {
      padding: 0.5rem;
      border: 1px solid #dee2e6;
      font-size: 0.9rem;
    }

    .trigger-table th {
      background: #f8f9fa;
      color: #2c3e50;
    }

    .observation-block {
      margin: 1rem 0;
      padding: 1rem;
      background: #f8f9fa;
      border-left: 3px solid #7c7bad;
    }

    .edit-button {
      padding: 0.25rem 0.75rem;
      color: #7c7bad;
      border: 1px solid #7c7bad;
      background: none;
      border-radius: 4px;
      font-size: 0.85rem;
    }

    .edit-button:hover {
      background: #7c7bad;
      color: white;
    }

    .session-rating {
      display: flex;
      gap: 1rem;
      align-items: center;
      margin: 1rem 0;
    }

    .rating-option {
      padding: 0.25rem 0.5rem;
    }

    .file-block {
      display: flex;
      align-items: center;
      padding: 0.5rem;
      background: #f8f9fa;
      border-radius: 4px;
      margin: 1rem 0;
    }

    .file-icon {
      color: #7c7bad;
      margin-right: 1rem;
    }

    .response-image {
      max-width: 200px;
      border-radius: 4px;
      margin: 1rem 0;
    }

    /* Summary Section Styles */
    .summary-section {
      margin-top: 2rem;
      padding: 1rem;
      background: #f8f9fa;
    }

    .form-group {
      margin-bottom: 1rem;
    }

    .rating-group {
      display: flex;
      gap: 1rem;
      margin: 0.5rem 0;
    }

    /* Progress Indicator Styles */
    .progress-select {
      width: 100%;
      padding: 0.375rem;
      border: 1px solid #dee2e6;
      border-radius: 4px;
    }

    /* End Session/Module Buttons */
    .end-buttons {
      margin-top: 2rem;
      padding: 1rem 0;
      border-top: 1px solid #eee;
    }

    .end-button {
      background: none;
      border: 2px solid #7c7bad;
      color: #7c7bad;
      padding: 0.5rem 1.5rem;
      border-radius: 4px;
      font-weight: 500;
      transition: all 0.3s ease;
      margin-right: 1rem;
    }

    .end-button:hover {
      background: #7c7bad;
      color: white;
    }

    .end-button.warning {
      border-color: #dc3545;
      color: #dc3545;
    }

    .end-button.warning:hover {
      background: #dc3545;
      color: white;
    }

    /* Feedback Forms */
    .feedback-form {
      display: none;
      margin-top: 1.5rem;
      padding: 1.5rem;
      border: 1px solid #eee;
      border-radius: 8px;
      background: #f8f9fa;
    }

    .feedback-form.active {
      display: block;
      animation: slideDown 0.3s ease;
    }

    .next-modules {
      margin-top: 1rem;
      padding: 1rem;
      background: #fff;
      border-radius: 4px;
    }

    .module-option {
      background: white;
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 15px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      border: 2px solid transparent;
    }

    .module-option::before {
      content: "Press to see details";
      position: absolute;
      bottom: -25px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 5px 10px;
      border-radius: 4px;
      font-size: 12px;
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
      white-space: nowrap;
      z-index: 1000;
    }

    .module-option:hover::before {
      opacity: 1;
    }

    .module-option:hover {
      box-shadow: 0 6px 12px rgba(124, 123, 173, 0.2);
      transform: translateY(-3px);
      border-color: #7c7bad;
    }

    .module-option:active {
      transform: translateY(-1px);
      box-shadow: 0 4px 8px rgba(124, 123, 173, 0.15);
    }

    .module-header {
      position: relative;
    }

    .module-icon {
      width: 40px;
      height: 40px;
      background: #f0f0ff;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 15px;
      transition: all 0.3s ease;
    }

    .module-option:hover .module-icon {
      background: #7c7bad;
    }

    .module-option:hover .module-icon i {
      color: white;
    }

    .module-icon i {
      font-size: 1.2rem;
      color: #7c7bad;
      transition: color 0.3s ease;
    }

    .module-expand-icon {
      transition: transform 0.3s ease;
      color: #7c7bad;
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
    }

    .module-option.expanded {
      border-color: #7c7bad;
      background: #f8f7fc;
    }

    .module-option.expanded .module-expand-icon {
      transform: translateY(-50%) rotate(180deg);
    }

    .exercise-item {
      display: flex;
      align-items: center;
      padding: 12px;
      background: white;
      border-radius: 8px;
      margin-bottom: 8px;
      border: 1px solid #eee;
      transition: all 0.2s ease;
    }

    .exercise-item:hover {
      background: #f0f0ff;
      border-color: #7c7bad;
    }

    /* Пульсуюча анімація для нових модулів */
    @keyframes pulse {
      0% {
        box-shadow: 0 0 0 0 rgba(124, 123, 173, 0.4);
      }

      70% {
        box-shadow: 0 0 0 10px rgba(124, 123, 173, 0);
      }

      100% {
        box-shadow: 0 0 0 0 rgba(124, 123, 173, 0);
      }
    }

    .module-option.new {
      animation: pulse 2s infinite;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Test indicator styles with Bootstrap utilities */
    .bg-warning-subtle {
      background-color: #fff3cd !important;
    }

    .test-indicator-block {
      margin: 1.5rem 0;
      padding: 1.5rem;
      border: 2px solid #e735359d;
      border-radius: 8px;
      background: #fff;
    }

    .test-indicator-block h5 {
      color: #2c3e50;
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid #7c7bad;
    }

    .test-indicator-content {
      padding: 0.5rem;
      margin-bottom: 1rem;
      border-radius: 6px;
    }

    .test-story {
      font-style: italic;
      color: #666;
      padding: 0.5rem;
      margin: 1rem 0;
      border-left: 3px solid #7c7bad;
      position: relative;
      overflow: hidden;
      transition: max-height 0.3s ease-out;
      max-width: 70ch;
      white-space: pre-wrap;
      word-wrap: break-word;
      line-height: 1.5;
    }

    .test-story.collapsed {
      max-height: 80px;
    }

    .test-story.collapsed::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 40px;
      background: linear-gradient(transparent, #fff);
      pointer-events: none;
    }

    .expand-btn {
      color: #7c7bad;
      border: none;
      background: none;
      padding: 5px 10px;
      font-size: 0.9rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      margin-top: 5px;
    }

    .expand-btn:hover {
      text-decoration: underline;
    }

    .expand-icon {
      transition: transform 0.3s ease;
      margin-left: 5px;
    }

    .expand-icon.rotated {
      transform: rotate(180deg);
    }

    /* Session Card Styles */
    .session-card {
      cursor: pointer;
      transition: all 0.2s ease-in-out;
    }

    .session-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 0.5rem 1rem rgba(124, 123, 173, 0.15) !important;
      border-color: #7c7bad;
    }

    .session-card:hover .card-title {
      color: #7c7bad;
    }

    .session-card:active {
      transform: translateY(-2px);
    }

    /* Back button hover effect */
    .btn-link:hover {
      color: #7c7bad !important;
    }

    .comment-text {
      position: relative;
      max-height: 60px;
      overflow: hidden;
      transition: max-height 0.3s ease-out;
    }

    .comment-text.expanded {
      max-height: 1000px;
    }

    .comment-text.collapsible::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 30px;
      background: linear-gradient(transparent, rgba(248, 249, 250, 1));
    }

    .comment-toggle {
      color: #7c7bad;
      border: none;
      background: none;
      padding: 0;
      font-size: 0.9rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .comment-toggle:hover {
      text-decoration: underline;
    }

    .rotate-icon {
      transition: transform 0.3s ease-in-out;
    }

    .rotate-icon.rotate {
      transform: rotate(180deg);
    }

    .editable-cell {
      position: relative;
    }

    .edit-icon {
      position: absolute;
      right: 10px;
      top: 10px;
      opacity: 0;
      transition: opacity 0.2s ease-in-out;
      cursor: pointer;
      color: #6c757d;
    }

    .editable-cell:hover .edit-icon {
      opacity: 1;
    }

    .cell-content {
      padding-right: 30px;
    }

    /* Transition for collapse */
    .collapse {
      transition: height 0.3s ease-in-out;
    }

    /* Custom table styles */
    .table-hover tbody tr:hover {
      background-color: rgba(0, 0, 0, 0.02);
    }

    /* Interactive Diagram Styles */
    .diagram-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2rem;
    }

    .hexagon-wrapper {
      display: grid;
      grid-template-areas:
        ". thoughts ."
        "behaviors . feelings";
      gap: 1rem;
      padding: 1rem;
      width: 100%;
      max-width: 500px;
      margin: 0 auto;
    }

    #thoughts {
      grid-area: thoughts;
      justify-self: center;
      margin-bottom: -1rem;
    }

    #behaviors {
      grid-area: behaviors;
      justify-self: center;
      margin-left: 3rem;
    }

    #feelings {
      grid-area: feelings;
      justify-self: center;
      margin-right: 3rem;
    }

    .hexagon {
      width: 150px;
      height: 150px;
      background: linear-gradient(135deg, #6b8dd6 0%, #8490ff 100%);
      clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: transform 0.3s ease, background 0.3s ease;
      color: white;
      text-align: center;
    }

    .hexagon:hover {
      transform: scale(1.05);
      background: linear-gradient(135deg, #5c7ab8 0%, #717dff 100%);
    }

    .hexagon.active {
      background: linear-gradient(135deg, #4a68a6 0%, #5e6aff 100%);
      transform: scale(1.1);
    }

    .hexagon-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 1rem;
    }

    .hexagon-content i {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .text-areas-container {
      width: 100%;
      max-width: 600px;
      margin: 0 auto;
    }

    .text-area-container {
      background: #f8f9fa;
      padding: 1rem;
      border-radius: 8px;
      margin-bottom: 1rem;
    }

    .text-area-header {
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: #495057;
    }

    .hexagon-wrapper {
      display: grid;
      grid-template-areas:
        ". thoughts ."
        "behaviors . feelings";
      gap: 0.5rem;
      max-width: 450px;
      margin: 0 auto;
    }

    .hexagon {
      width: 140px;
      height: 140px;
    }

    #thoughts {
      margin-bottom: -0.5rem;
      grid-area: thoughts;
    }

    #behaviors {
      margin-left: 2rem;
      grid-area: behaviors;
    }

    #feelings {
      margin-right: 2rem;
      grid-area: feelings;
    }

    .module-option {
      background: white;
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 15px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .module-option:hover {
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
      transform: translateY(-2px);
    }

    .module-icon {
      width: 40px;
      height: 40px;
      background: #f8f9fa;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 15px;
    }

    .module-icon i {
      font-size: 1.2rem;
      color: #6c757d;
    }

    .module-expand-icon {
      transition: transform 0.3s ease;
    }

    .module-option.expanded .module-expand-icon {
      transform: rotate(180deg);
    }

    .module-details {
      border-top: 1px solid #eee;
      margin-top: 15px;
      padding-top: 15px;
    }

    .exercise-item {
      display: flex;
      align-items: center;
      padding: 8px;
      background: #f8f9fa;
      border-radius: 6px;
    }

    .exercise-item i {
      font-size: 1.1rem;
    }

    .task-image {
      transition: transform 0.3s ease;
      max-width: 100%;
    }

    .task-image:hover {
      transform: scale(1.2);
      cursor: pointer;
    }

    .trigger-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 15px;
      background: #f0f0ff;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 1px solid #7c7bad;
    }

    .trigger-header:hover {
      background: #e6e6ff;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(124, 123, 173, 0.2);
    }

    .trigger-header span {
      font-weight: 500;
      color: #7c7bad;
    }

    .trigger-header i {
      color: #7c7bad;
      transition: transform 0.3s ease;
    }

    .trigger-header.active i {
      transform: rotate(180deg);
    }

    .diagram-container {
      position: relative;
      padding: 20px;
      min-height: 400px;
    }

    .hexagon-wrapper {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-bottom: 20px;
    }

    .hexagon {
      width: 120px;
      height: 104px;
      background: #7C7BAD;
      position: relative;
      cursor: pointer;
      transition: all 0.3s ease;
      clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);
    }

    .hexagon:hover {
      background: #615fa0;
    }

    .hexagon.active {
      background: #4a4884;
    }

    .hexagon-content {
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: white;
      text-align: center;
    }

    .hexagon-content i {
      font-size: 24px;
    }

    .hexagon-section {
      display: flex;
      align-items: flex-start;
      gap: 20px;
      margin-bottom: 20px;
    }

    .text-area-container {
      flex: 1;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 8px;
      transition: all 0.3s ease;
      opacity: 0.7;
    }

    .text-area-container.active {
      background: #fff;
      opacity: 1;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .text-area-header {
      color: #5e5c88;
      margin-bottom: 10px;
      font-weight: 500;
    }

    .form-control {
      border-color: #d4d3e7;
    }

    .form-control:focus {
      border-color: #7C7BAD;
      box-shadow: 0 0 0 0.2rem rgba(124, 123, 173, 0.25);
    }

    
    .diagram-container {
      position: relative;
      padding: 20px;
      min-height: 500px;
    }

    .hexagon-wrapper {
      display: grid;
      grid-template-rows: auto auto;
      gap: 30px;
      justify-items: center;
      margin-bottom: 20px;
    }

    .top-hexagon {
      grid-row: 1;
      grid-column: 1 / span 2;
      display: flex;
      justify-content: center;
    }

    .bottom-hexagons {
      grid-row: 2;
      grid-column: 1 / span 2;
      display: flex;
      gap: 60px;
      justify-content: center;
    }

    .hexagon-group {
      display: flex;
      align-items: flex-start;
      gap: 20px;
    }

    .hexagon {
      width: 120px;
      height: 104px;
      background: #7C7BAD;
      position: relative;
      cursor: pointer;
      transition: all 0.3s ease;
      clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);
      flex-shrink: 0;
    }

    .hexagon:hover {
      background: #615fa0;
    }

    .hexagon.active {
      background: #4a4884;
    }

    .hexagon-content {
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: white;
      text-align: center;
    }

    .hexagon-content i {
      font-size: 24px;
    }

    .text-area-container {
      flex: 1;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 8px;
      transition: all 0.3s ease;
      opacity: 0.7;
      min-width: 250px;
    }

    .text-area-container.active {
      background: #fff;
      opacity: 1;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .text-area-header {
      color: #5e5c88;
      margin-bottom: 10px;
      font-weight: 500;
    }

    .form-control {
      border-color: #d4d3e7;
    }

    .form-control:focus {
      border-color: #7C7BAD;
      box-shadow: 0 0 0 0.2rem rgba(124, 123, 173, 0.25);
    }

    
    /* Timeline styles */
    .timeline-container {
      position: relative;
      margin-left: 40px;
      padding-left: 30px;
      border-left: 3px solid #e0e0e0;
    }

    .timeline-item {
      position: relative;
      margin-bottom: 40px;
    }

    .timeline-dot {
      position: absolute;
      left: -40px;
      top: 24px;
      width: 18px;
      height: 18px;
      background: #fff;
      border: 4px solid #7c7bad;
      border-radius: 50%;
      z-index: 2;
      box-shadow: 0 0 0 2px #f8f9fa;
      transition: border-color 0.2s;
    }

    .timeline-dot.completed {
      background: #27ae60;
      border-color: #27ae60;
    }

    .timeline-dot.in-progress {
      background: #ffc107;
      border-color: #ffc107;
    }

    .timeline-dot.not-started {
      background: #fff;
      border-color: #adb5bd;
    }

    /* Optional: highlight current */
    .timeline-dot.current {
      box-shadow: 0 0 0 4px #7c7bad33;
    }

    @media (max-width: 600px) {
      .timeline-container {
        margin-left: 0;
        padding-left: 15px;
      }

      .timeline-dot {
        left: -28px;
      }
    }

    .triangle-container {
      position: relative;
      width: 600px;
      height: 500px;
      margin: 40px auto;
    }

    /* SVG arrows */
    .triangle-container .triangle-lines {
      position: absolute;
      pointer-events: none;
      z-index: 1;
      width: 20px;
      height: 300px;
      transition: opacity 0.5s;
    }

    .triangle-container .line-thought-emotion {
      translate: 116px 172px 0px;
      rotate: -150deg;
    }

    .triangle-container .line-thought-behavior {
      translate: 376px 21px 0px;
      rotate: -30deg;
    }

    .triangle-container .line-emotion-behavior {
      translate: 339px 225px 0px;
      rotate: 90deg;
    }

    .triangle-container .vertex {
      position: absolute;
      width: 13rem;
      min-height: 13rem;
      background-color: #7c7bad;
      border: 2px solid #7c7bad;
      border-radius: 12px;
      padding: 1rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      z-index: 2;
      transition: box-shadow 0.5s, transform 0.5s;
    }

    .triangle-container .vertex-header {
      font-weight: bold;
      margin-bottom: 8px;
      color: white;
    }

    .triangle-container .vertex__input:focus,
    .triangle-container .vertex__input:active,
    .triangle-container .vertex__input {
      color: white;
      background-color: transparent;
    }

    .triangle-container .vertex__input::placeholder {
      color: #e2e2e2;
    }

    .triangle-container .thought {
      top: 0;
      left: 32.5%;
      background-color: #9d8df1;
      border-color: #9d8df1;
    }

    .triangle-container .emotion {
      bottom: 0;
      right: 0;
      background-color: #62d0b6;
      border-color: #62d0b6;
    }

    .triangle-container .behavior {
      bottom: 0;
      left: 0;
      background-color: #f27b7b;
      border-color: #f27b7b;
    }

    .triangle-container .plus-btn {
      margin-top: 8px;
    }

    .triangle-container .list-group-item {
      padding: 4px 8px;
      font-size: 14px;
    }

    .triangle-container .glow-effect {
      box-shadow: 0px 0px 13px 3px #d1c5ff, 0px 0px 84px 24px #b9aaff;
      transform: scale(1.1);
    }

    .triangle-container .emotion.glow-effect {
      box-shadow: 0px 0px 13px 3px #a2f6e3, 0px 0px 84px 24px #70f5dc;
    }

    .triangle-container .behavior.glow-effect {
      box-shadow: 0px 0px 13px 3px #ffbaba, 0px 0px 84px 24px #ff9c9c;
    }

    .triangle-container .list-item-bg {
      background-color: transparent;
    }

    .triangle-container .dark-border {
      border-color: rgba(0, 0, 0, 0.1);
    }

    .triangle-lines.invisible {
      opacity: 0;
    }

    /* Add tab styles from albert.html */
    .nav-tabs .nav-link {
        border: none;
        color: #495057;
        font-weight: 500;
        padding: 1rem 2rem;
        background-color: #f0f0f0;
        margin-right: 3px;
        border-radius: 4px 4px 0 0;
        font-size: 1.05rem;
    }
    
    .nav-tabs .nav-link.active {
        color: #816189;
        background-color: #e8e8e8;
        border-bottom: 5px solid #816189;
    }
    
    .nav-tabs .nav-link:hover:not(.active) {
        background-color: #e8e8e8;
        border-bottom: 3px solid #dee2e6;
    }
    
    .tab-content {
        margin-left: 20px;
        padding: 1.5rem 0;
    }
    
    /* Fix for side tabs to align with main container */
    .tab-pane .row {
        align-items: flex-start;
    }
  </style>



    <div class="tabs-container">        
        <div class="horizontal-tabs nav-tabs">      
            <button class="horizontal-tab nav-link active" onclick="showModule('current')">        
                Threatment      
            </button>      
            <button class="horizontal-tab nav-link" onclick="showModule('future')">        
                Diagnostic <span class="badge bg-success">Done</span>      
            </button>      
            <div class="flex-grow-1"></div>      
            <button class="horizontal-tab treatment-plan" onclick="showModule('treatment')">        
                <i class="fas fa-clipboard-list me-2"></i> Treatment Plan      
            </button>    
        </div>

    
    <div class="module-content active" id="current-module">
      <div class="content-area">
        
        <div class="vertical-tabs">
          <button class="vertical-tab active" onclick="showContent('session-info', 'current')">
            Current session
          </button>
          <button class="vertical-tab" onclick="showContent('current-tasks', 'current')">
            Tasks
          </button>
          <button class="vertical-tab" onclick="showContent('session-history', 'current')">
            Session history
          </button>
          <button class="vertical-tab" onclick="showContent('problems-statistic', 'current')">
            Statistics
          </button> <button class="vertical-tab end-module-tab" onclick="showContent('end-module', 'current')">
            <i class="fas fa-door-closed"></i>End module
          </button>
        </div>

        <div id="session-info" style="margin-left: 20px" class="tab-content active">
          <h3 class="content-title">Current Session - Advanced Emotion Mapping</h3>

          <div class="session-block">
            <div class="d-flex align-items-center mb-3">
              <div>
                <span class="text-muted"><i class="fas fa-clock me-1"></i> 14:00 - 15:00</span>
                <span class="badge bg-primary ms-2">In Progress</span>
              </div>
            </div>



            <div class="card module-card shadow-sm mb-4" style="border-left: 4px solid #20c997;">
              <div class="card-header module-header d-flex justify-content-between align-items-center bg-teal-subtle text-teal" id="triggerHeader" style="background-color: #d2f4ea; color: #198754; cursor: pointer;" data-bs-toggle="collapse" data-bs-target="#triggerTable" aria-expanded="false" aria-controls="triggerTable" role="button">
                <h5 class="mb-0">
                  <span class="d-flex align-items-center">
                    <i class="fas fa-clipboard-list me-2"></i>Trigger Identification Worksheet
                    <button class="btn btn-sm btn-link border-0 p-0 ms-2" style="color: #198754;">
                    </button>
                  </span>
                </h5>
                <i class="fas fa-chevron-down rotate-icon transition" id="triggerTableIcon"></i>
              </div>
              <div id="triggerTable" class="collapse" aria-labelledby="triggerHeader">
                <div class="card-body p-0">
                  <div class="table-responsive">
                    <table class="table table-striped table-hover mb-0">
                      <thead class="table-light">
                        <tr>
                          <th>Potential Triggers</th>
                          <th>Patient Responses</th>
                          <th>How This Affects Me</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td><strong>Speaking in front of the class</strong></td>
                          <td>
                            I felt proud after I finished my school
                            presentation even though I was scared at first.
                          </td>
                          <td>Blushing, shaky voice</td>
                        </tr>
                        <tr>
                          <td><strong>Trying something new</strong></td>
                          <td>
                            When I tried a new sport, I was very nervous but
                            stayed until the end of practice.
                          </td>
                          <td>Tummy aches, avoidance behavior</td>
                        </tr>
                        <tr>
                          <td><strong>Unexpected changes in routine</strong></td>
                          <td>
                            Last time when our family trip got canceled, I
                            felt super upset but did my breathing exercise.
                            <div class="text-left mt-3 mb-3">
                              <img src="https://cdn.openart.ai/uploads/image_B6A-70Oa_1694791168553_1024.jpg" alt="Response illustration" class="img-fluid rounded shadow-sm" style="max-height: 200px;" loading="lazy">
                              <p class="text-muted mt-2"><small>Child's drawing illustrating emotional response</small>
                              </p>
                            </div>
                          </td>
                          <td>Crying, irritability</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div> 
            <div class="card module-card shadow-sm mb-4" style="border-left: 4px solid #0d6efd;">
              <div class="card-header module-header d-flex justify-content-between align-items-center bg-primary-subtle text-primary">
                <h5 class="mb-0"><i class="fas fa-eye me-2"></i>Observations</h5>
                <button class="btn btn-sm btn-outline-primary" onclick="toggleObservationEdit()">
                  <i class="fas fa-edit me-1"></i> Edit
                </button>
              </div>
              <div class="card-body">
                <div id="observationText" class="p-3 bg-light rounded">
                  <i class="fas fa-quote-left text-muted me-2"></i>
                  Client responds well to visual aids, struggles with verbal
                  descriptions of emotions.
                  <i class="fas fa-quote-right text-muted ms-2"></i>
                </div>
                <div id="observationEdit" style="display: none" class="mt-3">
                  <textarea class="form-control" rows="3">Client responds well to visual aids, struggles with verbal descriptions of emotions.</textarea>
                  <div class="mt-2 text-end">
                    <button class="btn btn-sm btn-outline-secondary me-2" onclick="cancelObservation()">
                      Cancel
                    </button>
                    <button class="btn btn-sm btn-primary" onclick="saveObservation()">
                      <i class="fas fa-save me-1"></i> Save
                    </button>
                  </div>
                </div>
              </div>
            </div>

            
            <div class="card module-card psychoeducation-module shadow-sm mb-4" style="border-left: 4px solid #198754;">
              <div class="card-header module-header d-flex justify-content-between align-items-center bg-success-subtle text-success" id="psychoeducationHeader" data-bs-toggle="collapse" data-bs-target="#homeworkContent" aria-expanded="true" aria-controls="homeworkContent" style="cursor: pointer;">
                <h5 class="mb-0">
                  <div class="d-flex align-items-center text-success">
                    <i class="fas fa-book-reader me-2"></i>Patient workbook
                  </div>
                </h5>
                <div>
                  <span class="badge bg-success text-white me-2">Completed</span>
                </div>
              </div>

              <div id="homeworkContent" class="collapse show" aria-labelledby="psychoeducationHeader">
                <div class="card-body">
                  <div class="row">
                    <div class="col-md-6">
                      <h5><i class="bi bi-journal-bookmark me-2"></i>Materials Provided</h5>
                      <div class="list-group mb-4">
                        <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                          "Helping Your Anxious Child" booklet
                          <span class="badge bg-primary rounded-pill">05/01/25</span>
                        </a>
                        <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                          Medication guide for parents
                          <span class="badge bg-primary rounded-pill">05/08/25</span>
                        </a>
                        <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                          School anxiety video series
                          <span class="badge bg-primary rounded-pill">04/15/25</span>
                        </a>
                      </div>

                      <h5><i class="bi bi-check2-circle me-2"></i>Key Concepts Covered</h5>
                      <ul class="list-group list-group-flush">
                        <li class="list-group-item">
                          <i class="bi bi-check-circle text-success me-2"></i>
                          Anxiety vs. fear difference
                        </li>
                        <li class="list-group-item">
                          <i class="bi bi-check-circle text-success me-2"></i>
                          Avoidance cycle explanation
                        </li>
                        <li class="list-group-item">
                          <i class="bi bi-check-circle text-success me-2"></i>
                          How SSRIs work in children
                        </li>
                        <li class="list-group-item">
                          <i class="bi bi-dash-circle text-secondary me-2"></i>
                          Behavioral reinforcement strategies
                        </li>
                      </ul>
                    </div>
                    <div class="col-md-6">
                      <div class="card h-100">
                        <div class="card-header bg-light">
                          <h6 class="mb-0"><i class="fas fa-paperclip me-2"></i>Attachments</h6>
                        </div>
                        <div class="card-body">
                          <div class="text-center mt-3 mb-3">
                            <img src="https://www.breatheazy.co.uk/wp-content/uploads/2023/09/Untitled-design-35-1080x675.png" alt="Attachment image" class="img-fluid rounded shadow-sm" style="max-height: 180px;" loading="lazy">

                            <p class="text-muted mt-2"><small>My mind in this moment</small></p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="card module-card shadow-sm mb-4" style="border-left: 4px solid #0d6efd;">
              <div class="card-header module-header d-flex justify-content-between align-items-center bg-primary-subtle text-primary" id="diagramHeader" data-bs-toggle="collapse" data-bs-target="#collapseDiagram" aria-expanded="true" aria-controls="collapseDiagram" style="cursor: pointer;">
                <h5 class="mb-0">
                  <div class="text-decoration-none d-flex align-items-center text-primary">
                    <i class="fas fa-project-diagram me-2"></i><span>Cognitive Behavioral Triangle</span>
                  </div>
                </h5>
                <i class="fas fa-chevron-down rotate-icon transition rotate"></i>
              </div>

              <div id="collapseDiagram" class="collapse show" aria-labelledby="diagramHeader">
                <div class="card-body">

                  <div class="triangle-container" onclick="triangleContainerClick(event)">

                    <svg class="line-thought-emotion triangle-lines">
                      <defs>
                        <marker id="arrow1" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto-start-reverse" markerUnits="strokeWidth">
                          <path d="M0,0 L10,5 L0,10 Z" fill="#888"></path>
                        </marker>
                      </defs>
                      
                      <line x1="10" y1="0" x2="10" y2="280" stroke="#888" stroke-width="2" marker-end="url(#arrow1)"></line>
                    </svg>

                    <svg class="line-thought-behavior triangle-lines">
                      <defs>
                        <marker id="arrow2" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto-start-reverse" markerUnits="strokeWidth">
                          <path d="M0,0 L10,5 L0,10 Z" fill="#888"></path>
                        </marker>
                      </defs>
                      
                      <line x1="10" y1="0" x2="10" y2="280" stroke="#888" stroke-width="2" marker-end="url(#arrow2)"></line>
                    </svg>
                    <svg class="line-emotion-behavior triangle-lines">
                      <defs>
                        <marker id="arrow3" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto-start-reverse" markerUnits="strokeWidth">
                          <path d="M0,0 L10,5 L0,10 Z" fill="#888"></path>
                        </marker>
                      </defs>
                      
                      <line x1="10" y1="0" x2="10" y2="280" stroke="#888" stroke-width="2" marker-end="url(#arrow3)"></line>
                    </svg>

                    
                    <div class="vertex thought" id="thought-wrapper" onclick="toggleVertexGlowEffect('thought', event)">
                      <div class="vertex-header d-flex justify-content-between align-items-center">
                        <div class="d-flex align-items-center">
                          <i class="fas fa-brain me-1"></i>
                          THROUGHTS
                        </div>
                        <button class="btn btn-outline-light btn-sm mt-1 rounded" onclick="addVertexListItem('thought', event)">
                          <i class="bi bi-plus-lg mr-1"></i>
                        </button>
                      </div>
                      <ul class="list-group list-group-flush mb-2" id="thoughtList"></ul>
                      <input class="form-control form-control-sm vertex__input d-none" type="text" placeholder="Thought" id="thought-input" onclick="vertexInputClick(event)" onkeydown="vertexInputKeyDown('thought', event)">
                    </div>

                    
                    <div class="vertex behavior" id="behavior-wrapper" onclick="toggleVertexGlowEffect('behavior', event)">
                      <div class="vertex-header d-flex justify-content-between align-items-center">
                        <div class="d-flex align-items-center">
                          <i class="fas fa-running me-1"></i>
                          BEHAVIORS
                        </div>
                        <button class="btn btn-outline-light btn-sm mt-1 rounded" onclick="addVertexListItem('behavior', event)">
                          <i class="bi bi-plus-lg mr-1"></i>
                        </button>
                      </div>
                      <ul class="list-group list-group-flush mb-2" id="behaviorList"></ul>
                      <input class="form-control form-control-sm vertex__input d-none" type="text" placeholder="Behavior" id="behavior-input" onclick="vertexInputClick(event)" onkeydown="vertexInputKeyDown('behavior', event)">
                    </div>

                    
                    <div class="vertex emotion" id="emotion-wrapper" onclick="toggleVertexGlowEffect('emotion', event)">
                      <div class="vertex-header d-flex justify-content-between align-items-center">
                        <div class="d-flex align-items-center">
                          <i class="fas fa-heart me-1"></i>
                          FEELINGS
                        </div>
                        <button class="btn btn-outline-light btn-sm mt-1 rounded" onclick="addVertexListItem('emotion', event)">
                          <i class="bi bi-plus-lg mr-1"></i>
                        </button>
                      </div>
                      <ul class="list-group list-group-flush mb-2" id="emotionList"></ul>
                      <input class="form-control form-control-sm vertex__input d-none" type="text" placeholder="Feeling" id="emotion-input" onclick="vertexInputClick(event)" onkeydown="vertexInputKeyDown('emotion', event)">
                    </div>
                  </div>

                </div>
              </div>
            </div>

            
            <div class="end-buttons">
              <button class="end-button" onclick="toggleEndSessionForm()">
                <i class="fas fa-flag-checkered me-2"></i>End session
              </button>
            </div>

            
            <div id="endSessionForm" class="feedback-form">
              <h5>End the session</h5>
              <div class="mb-3">
                <label class="form-label">Your observation and conclutions:</label>
                <textarea class="form-control" rows="3" placeholder="describe result of session and important details..."></textarea>
              </div>

              <div class="mb-3">
                <label class="form-label">Session effectiveness assessment:</label>
                <select class="form-control">
                  <option>Excellent</option>
                  <option>Good</option>
                  <option>Satisfactory</option>
                  <option>Need some improvment</option>
                </select>
              </div>

              <div class="next-modules">
                <h6>Next session:</h6>

                <div class="module-option" onclick="selectModule(this)">
                  <div class="module-icon">
                    <i class="fas fa-users"></i>
                  </div>
                  <div>
                    <div class="fw-bold">Reframing thoughts</div>
                    <small class="text-muted">Change mind of child about stress and anxiety</small>
                  </div>
                </div>
              </div>

              <div class="d-flex justify-content-end gap-2">
                <button class="end-button" onclick="toggleEndSessionForm()">
                  Cancel
                </button>
                <button class="end-button">Save and Complete</button>
              </div>
            </div>

            
            <div id="endModuleForm" class="feedback-form">
              <h5>End the module</h5>
              <div class="mb-3">
                <label class="form-label">General conclutuion:</label>
                <textarea class="form-control" rows="3" placeholder="Describe achievements, progress and recommendations..."></textarea>
              </div>

              <div class="next-modules">
                <h6>Choose next modulle:</h6>
                <div class="module-option" onclick="selectModule(this)">
                  <div class="module-icon">
                    <i class="fas fa-brain"></i>
                  </div>
                  <div>
                    <div class="fw-bold">Self-compassion</div>
                    <small class="text-muted">Learn self-compassion techniques and practices</small>
                  </div>
                </div>
                <div class="module-option" onclick="selectModule(this)">
                  <div class="module-icon">
                    <i class="fas fa-heart"></i>
                  </div>
                  <div>
                    <div class="fw-bold">Stress tolerance</div>
                    <small class="text-muted">Develop skills for managing stress and anxiety</small>
                  </div>
                </div>
                <div class="module-option" onclick="selectModule(this)">
                  <div class="module-icon">
                    <i class="fas fa-users"></i>
                  </div>
                  <div>
                    <div class="fw-bold">Mindfulness</div>
                    <small class="text-muted">Practice mindfulness and present-moment awareness</small>
                  </div>
                </div>
              </div>

              <div class="d-flex justify-content-end gap-2 mt-3">
                <button class="end-button" onclick="toggleEndModuleForm()">
                  Cancel
                </button>
                <button class="end-button warning">Save module</button>
              </div>
            </div>
          </div>
        </div>
        <div id="current-tasks" class="tab-content">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h3 class="content-title mb-0">Tasks</h3>
            <i class="fas fa-question-circle text-muted" style="font-size: 14px; cursor: help;" data-bs-toggle="tooltip" data-bs-placement="top" title="This is task that patient should complete during the session"></i>
          </div>

          <div class="tasks-section">
            <div class="task-card" id="task-1">
              <div class="task-body p-3">
                <div class="d-flex">
                  <input type="checkbox" class="task-checkbox" data-task-id="1">
                  <div class="flex-grow-1 ms-3">
                    <div class="task-header">
                      <h5 class="task-title">
                        Thought – Emotion – Alternative
                      </h5>
                      <button class="comment-btn add-comment-btn" data-task-id="1">
                        <i class="bi bi-chat-left-text"></i> Add Comment
                      </button>
                    </div>
                    <p class="task-description">
                      Daily 15-minute breathing exercises
                    </p>

                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT-pj5wGVEUnvpp96LvX1m1Of-laOrd7ljh1A&amp;s" class="task-image" alt="Task illustration" loading="lazy">

                    <div class="comment-form" id="comment-form-1" style="display: none">
                      <form class="task-comment-form" data-task-id="1">
                        <div class="mb-2">
                          <label class="form-label small">Doctor's comment:</label>
                          <textarea class="form-control" rows="2" placeholder="Add your professional observations..."></textarea>
                        </div>
                        <div class="text-end">
                          <button type="button" class="comment-btn me-2 cancel-comment-btn">
                            Cancel
                          </button>
                          <button type="submit" class="comment-btn">
                            Save
                          </button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="task-card completed-task" id="task-2">
              <div class="task-body p-3">
                <div class="d-flex">
                  <input type="checkbox" class="task-checkbox" checked="" disabled="" data-task-id="2">
                  <div class="flex-grow-1 ms-3">
                    <div class="task-header">
                      <h5 class="task-title">What Would a Friend Say?</h5>
                      <button class="comment-btn add-comment-btn" data-task-id="2">
                        <i class="bi bi-chat-left-text"></i> Edit Comment
                      </button>
                    </div>
                    <p class="task-description">
                      Record emotional states 3 times daily
                    </p>

                    <div class="doctor-note">
                      <strong>Doctor's Note:</strong> Note physical sensations
                      associated with emotions
                    </div>

                    <div class="file-attachment">
                      <i class="fas fa-file-image file-icon"></i>
                      <div class="file-info">
                        <div class="file-name">emotionalState.png</div>
                        <div class="file-meta">PNG • 1.2 MB</div>
                      </div>
                      <button class="comment-btn">
                        <i class="fas fa-download"></i> Download
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="task-card completed-task" id="task-3">
              <div class="task-body p-3">
                <div class="d-flex">
                  <input type="checkbox" class="task-checkbox" checked="" disabled="" data-task-id="3">
                  <div class="flex-grow-1 ms-3">
                    <div class="task-header">
                      <h5 class="task-title">Thermometry of Anxiety</h5>
                      <button class="comment-btn add-comment-btn" data-task-id="3">
                        <i class="bi bi-chat-left-text"></i> Edit Comment
                      </button>
                    </div>
                    <p class="task-description">
                      This is an exercise for thermometry of anxiety
                    </p>

                    <div class="doctor-note">
                      <strong>Doctor's Note:</strong> Note physical sensations
                      associated with emotions
                    </div>

                    <div class="chart-container">
                      <h6 class="text-muted mb-3">
                        Anxiety Level (Last 7 Days)
                      </h6>
                      <canvas id="anxietyChart"></canvas>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div id="session-history" class="tab-content">
          <div id="sessions-list">
            <h3 class="content-title">Session history</h3>
            <div class="row g-4">
              
              <div class="col-md-6 col-lg-4">
                <div class="card shadow-sm h-100 session-card" onclick="showSessionDetails('session1')">
                  <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                      <div class="session-date bg-purple-subtle rounded-circle p-3 me-3" style="width: 60px; height: 60px; display: flex; flex-direction: column; justify-content: center; align-items: center; background-color: rgba(128, 0, 128, 0.1);">
                        <strong>11</strong>
                        <div class="small">May</div>
                      </div>
                      <div>
                        <h5 class="card-title mb-1">
                          Psychoeducation: Understanding Anxiety of your child
                        </h5>
                        <p class="text-muted small mb-0">15:30 - 16:30</p>
                      </div>
                    </div>
                    <div class="progress mb-3" style="height: 6px">
                      <div class="progress-bar bg-success" style="width: 85%"></div>
                    </div>
                    <p class="card-text">
                      Introduced the concept of anxiety, its causes, symptoms, and impact on children's daily lives.
                      Explained the fight-or-flight response and how it manifests in children
                    </p>
                  </div>
                  <div class="card-footer bg-light">
                    <div class="d-flex justify-content-between align-items-center">
                      <span class="badge bg-warning-subtle text-warning-emphasis">Complete</span>
                      <span class="text-muted small">Efficiency: 85%</span>
                    </div>
                  </div>
                </div>
              </div>

              
              <div class="col-md-6 col-lg-4">
                <div class="card shadow-sm h-100 session-card" onclick="showSessionDetails('session2')">
                  <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                      <div class="session-date bg-purple-subtle rounded-circle p-3 me-3" style="width: 60px; height: 60px; display: flex; flex-direction: column; justify-content: center; align-items: center; background-color: rgba(128, 0, 128, 0.1);">
                        <strong>11</strong>
                        <div class="small">May</div>
                      </div>
                      <div>
                        <h5 class="card-title mb-1">
                          Child Session: Understanding and Coping with Anxiety
                        </h5>
                        <p class="text-muted small mb-0">14:00 - 15:00</p>
                      </div>
                    </div>
                    <div class="progress mb-3" style="height: 6px">
                      <div class="progress-bar bg-success" style="width: 75%"></div>
                    </div>
                    <p class="card-text">
                      Engaged the child in a conversation about their feelings of anxiety.
                      Explained what anxiety is in child-friendly terms,
                      identified situations that cause worry, and introduced strategies to manage
                      it using thought-emotion-alternative mapping.
                    </p>
                  </div>
                  <div class="card-footer bg-light">
                    <div class="d-flex justify-content-between align-items-center">
                      <span class="badge bg-warning-subtle text-warning-emphasis">Complete</span>
                      <span class="text-muted small">Efficiency: 75%</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          
          <div id="session-details" style="display: none">
            <div class="mb-4">
              <button class="btn btn-link text-decoration-none text-black p-0 mb-3" onclick="showSessionsList()">
                <i class="fas fa-arrow-left"></i> Go back to session
              </button>
              <h3 class="content-title mb-3" id="session-title"></h3>
            </div>

            <div class="card shadow-sm mb-4">
              <div class="card-body">
                <div class="row">
                  <div class="col-md-6">
                    <h5 class="card-title text-muted mb-3">
                      Main Information
                    </h5>
                    <table class="table table-borderless">
                      <tbody><tr>
                        <td><strong>Date:</strong></td>
                        <td id="session-date"></td>
                      </tr>
                      <tr>
                        <td><strong>Duration:</strong></td>
                        <td id="session-duration"></td>
                      </tr>
                      <tr>
                        <td><strong>Efficiency:</strong></td>
                        <td id="session-effectiveness"></td>
                      </tr>
                    </tbody></table>
                  </div>
                  <div class="col-md-6">
                    <h5 class="card-title text-muted mb-3">
                      Session statistics
                    </h5>
                    <div class="chart-container" style="position: relative; height: 300px">
                      <canvas id="sessionChart"></canvas>
                    </div>
                  </div>
                </div>
              </div>
            </div> 
            <div class="card shadow-sm mb-4">
              <div class="card-body">
                <h5 class="card-title text-muted mb-3">Goal</h5>
                <div id="session-goal" class="bg-light p-3 rounded"></div>
              </div>
            </div>

            <div class="row g-4">
              
              <div class="col-md-6">
                <div class="card shadow-sm h-100">
                  <div class="card-body">
                    <h5 class="card-title text-muted mb-3">Objectives</h5>
                    <ul id="session-objectives" class="list-unstyled"></ul>
                  </div>
                </div>
              </div>

              
              <div class="col-md-6">
                <div class="card shadow-sm h-100">
                  <div class="card-body">
                    <h5 class="card-title text-muted mb-3">Exercises</h5>
                    <div id="session-exercises"></div>
                  </div>
                </div>
              </div>

              
              <div class="col-12">
                <div class="card shadow-sm">
                  <div class="card-body">
                    <h5 class="card-title text-muted mb-3">Observations</h5>
                    <div id="session-observations" class="bg-warning-subtle border-start-custom rounded p-3"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div id="problems-statistic" class="tab-content">
          <h3 class="content-title">Statistics</h3>
          <div class="row g-4">
            <div class="col-md-6">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title text-muted mb-3">Week progress</h5>
                  <div class="chart-container" style="position: relative; height: 300px">
                    <canvas id="weeklyProgressChart"></canvas>
                  </div>
                </div>
              </div>
            </div>

            
            <div class="col-md-6">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title text-muted mb-3">Emotional state</h5>
                  <div class="chart-container" style="position: relative; height: 300px">
                    <canvas id="emotionalStateChart"></canvas>
                  </div>
                </div>
              </div>
            </div>

            
            <div class="col-12">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title text-muted mb-3">
                    Key indicators
                  </h5>
                  <div class="row g-3">
                    <div class="col-md-3">
                      <div class="p-3 border-start-custom rounded" style="background-color: rgba(128, 0, 128, 0.1);">
                        <h6 class="mb-2">General progress</h6>
                        <h3 class="mb-0">75%</h3>
                      </div>
                    </div>
                    <div class="col-md-3">
                      <div class="p-3 border-start-custom rounded" style="background-color: rgba(128, 0, 128, 0.1);">
                        <h6 class="mb-2">Complete exercise</h6>
                        <h3 class="mb-0">8/10</h3>
                      </div>
                    </div>

                    <div class="col-md-3">
                      <div class="p-3 border-start-custom rounded" style="background-color: rgba(128, 0, 128, 0.1);">
                        <h6 class="mb-2">Attended Session</h6>
                        <h3 class="mb-0">3/3</h3>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        
        <div id="end-module" class="tab-content">
          <h3 class="content-title">End Module Form</h3>
          <div class="card card-body shadow-sm">
            <form id="endModuleForm">
              <div class="mb-3">
                <label class="form-label">Overall Progress Assessment</label>
                <select class="form-select" required="">
                  <option value="">Select progress...</option>
                  <option value="excellent">Excellent Progress</option>
                  <option value="good">Good Progress</option>
                  <option value="moderate">Moderate Progress</option>
                  <option value="minimal">Minimal Progress</option>
                  <option value="no-progress">No Progress</option>
                </select>
              </div>

              <div class="mb-3">
                <label class="form-label">Module Completion Notes</label>
                <textarea class="form-control" rows="4" placeholder="Enter detailed notes about the module completion..." required=""></textarea>
              </div>

              <div class="mb-3">
                <label class="form-label">Next Steps Recommendations</label>
                <textarea class="form-control" rows="3" placeholder="Recommend next steps or future modules..." required=""></textarea>
              </div>

              <div class="mb-3">
                <label class="form-label">Goals Achievement</label>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="goal1">
                  <label class="form-check-label" for="goal1">
                    Primary module objectives met
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="goal2">
                  <label class="form-check-label" for="goal2">
                    Patient showed significant improvement
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="goal3">
                  <label class="form-check-label" for="goal3">
                    Ready for next module
                  </label>
                </div>
              </div>

              <div class="d-flex gap-2">
                <button type="submit" class="btn btn-danger">
                  <i class="fas fa-check me-2"></i>Complete Module
                </button>
                <button type="button" class="btn btn-outline-secondary" onclick="showContent('session-info', 'current')">
                  Cancel
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div class="module-content" id="future-module">
      <div class="content-area">
        <div class="vertical-tabs">
          <button class="vertical-tab active" onclick="showContent('future-plans', 'future')">
            Diagnostic overview
          </button>

          <button class="vertical-tab" onclick="showContent('diagnostic-tasks', 'future')">
            Tasks
          </button>

          <button class="vertical-tab" onclick="showContent('problem-symptoms', 'future')">
            Problems and symptoms
          </button>

        </div>

        <div id="future-plans" class="tab-content active">
          <h3 class="content-title">Diagnostic overview</h3>
          <div class="card shadow-sm mb-4">
            <div class="card-header bg-success-subtle">
              <div class="d-flex justify-content-between align-items-center">
                <h5 class="mb-0 text-success"><i class="fas fa-check-circle me-2"></i>Diagnostic Assessment Complete
                </h5>
                <span class="badge bg-success">Completed</span>
              </div>
            </div>
            <div class="card-body">
              <h5 class="card-title">Anxiety Disorder: Social Anxiety with School Refusal</h5>
              <p class="card-text">
                Based on the comprehensive assessment, 15-year-old male presents with significant anxiety symptoms
                directly linked to bullying experiences. Primary symptoms include social avoidance, school refusal
                behaviors, physical manifestations of anxiety (headaches, stomach pains), and sleep disturbances. The
                onset appears to correlate with bullying incidents that began 8 months ago.
              </p>
              <p class="card-text">
                Diagnostic criteria for Social Anxiety Disorder with specific school refusal components are met.
                Symptoms are causing significant impairment in academic functioning (40% attendance rate) and social
                development.
              </p>

              <div class="alert alert-primary mt-4">
                <div class="d-flex align-items-center">
                  <i class="fas fa-info-circle me-3 fs-4"></i>
                  <div>
                    <strong>Next Steps:</strong> Proceed to therapy planning with focus on cognitive-behavioral
                    techniques, gradual exposure to school environment, and family involvement.
                  </div>
                </div>
              </div>

              <div class="row g-3 mt-2">
                <div class="col-md-6">
                  <div class="card h-100 bg-light">
                    <div class="card-body">
                      <h6 class="card-title"><i class="fas fa-clipboard-list text-primary me-2"></i>Diagnostic Tasks
                      </h6>
                      <p class="card-text text-muted">View completed assessment tasks and tools used for diagnosis.</p>
                      <a href="#" class="btn btn-outline-primary btn-sm" onclick="showContent('diagnostic-tasks', 'future'); return false;">View Tasks</a>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="card h-100 bg-light">
                    <div class="card-body">
                      <h6 class="card-title"><i class="fas fa-exclamation-triangle text-warning me-2"></i>Problems &amp;
                        Symptoms</h6>
                      <p class="card-text text-muted">Review detailed case information and symptom history.</p>
                      <a href="#" class="btn btn-outline-primary btn-sm" onclick="showContent('problem-symptoms', 'future'); return false;">View Details</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card-footer">
              <div class="d-flex justify-content-between align-items-center">
                <small class="text-muted">Assessment completed on May 15, 2025</small>
                <button class="btn btn-primary btn-sm" onclick="showModule('current')">
                  <i class="fas fa-arrow-right me-1"></i> Proceed to Treatment
                </button>
              </div>
            </div>
          </div>
        </div>
        
        
        <div id="diagnostic-tasks" class="tab-content">
          <h3 class="content-title">Diagnostic Tasks</h3>
                  <div class="exercise-card mb-4">
                    <div class="card border-start border-success border-3">
                      <div class="card-header bg-light">
                        <div class="d-flex justify-content-between align-items-center">
                          <h6 class="mb-0"><i class="fas fa-thermometer-half text-danger me-2"></i>Exercise 1: Anxiety
                            Thermometer</h6>
                          <span class="badge bg-success">Completed May 11, 2025</span>
                        </div>
                      </div>
                      <div class="card-body">
                        <p class="mb-3">Please rate your anxiety level (0-10) in these different situations:</p>

                        <div class="table-responsive">
                          <table class="table table-bordered">
                            <thead class="table-light">
                              <tr>
                                <th>Situation</th>
                                <th class="text-center" style="width: 60%;">Anxiety Level (0-10)</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td>Walking through school hallways</td>
                                <td>
                                  <div class="d-flex align-items-center">
                                    <div class="progress flex-grow-1" style="height: 25px;">
                                      <div class="progress-bar bg-danger" role="progressbar" style="width: 80%;" aria-valuenow="8" aria-valuemin="0" aria-valuemax="10">8</div>
                                    </div>
                                    <span class="ms-2 fw-bold">8/10</span>
                                  </div>
                                </td>
                              </tr>
                              <tr>
                                <td>Sitting in the cafeteria during lunch</td>
                                <td>
                                  <div class="d-flex align-items-center">
                                    <div class="progress flex-grow-1" style="height: 25px;">
                                      <div class="progress-bar bg-danger" role="progressbar" style="width: 90%;" aria-valuenow="9" aria-valuemin="0" aria-valuemax="10">9</div>
                                    </div>
                                    <span class="ms-2 fw-bold">9/10</span>
                                  </div>
                                </td>
                              </tr>
                              <tr>
                                <td>Participating in gym class</td>
                                <td>
                                  <div class="d-flex align-items-center">
                                    <div class="progress flex-grow-1" style="height: 25px;">
                                      <div class="progress-bar bg-danger" role="progressbar" style="width: 100%;" aria-valuenow="10" aria-valuemin="0" aria-valuemax="10">10</div>
                                    </div>
                                    <span class="ms-2 fw-bold">10/10</span>
                                  </div>
                                </td>
                              </tr>
                              <tr>
                                <td>Being called on by the teacher in class</td>
                                <td>
                                  <div class="d-flex align-items-center">
                                    <div class="progress flex-grow-1" style="height: 25px;">
                                      <div class="progress-bar bg-warning" role="progressbar" style="width: 70%;" aria-valuenow="7" aria-valuemin="0" aria-valuemax="10">7</div>
                                    </div>
                                    <span class="ms-2 fw-bold">7/10</span>
                                  </div>
                                </td>
                              </tr>
                              <tr>
                                <td>Walking to school in the morning</td>
                                <td>
                                  <div class="d-flex align-items-center">
                                    <div class="progress flex-grow-1" style="height: 25px;">
                                      <div class="progress-bar bg-warning" role="progressbar" style="width: 70%;" aria-valuenow="7" aria-valuemin="0" aria-valuemax="10">7</div>
                                    </div>
                                    <span class="ms-2 fw-bold">7/10</span>
                                  </div>
                                </td>
                              </tr>
                              <tr>
                                <td>Seeing particular students from basketball team</td>
                                <td>
                                  <div class="d-flex align-items-center">
                                    <div class="progress flex-grow-1" style="height: 25px;">
                                      <div class="progress-bar bg-danger" role="progressbar" style="width: 100%;" aria-valuenow="10" aria-valuemin="0" aria-valuemax="10">10</div>
                                    </div>
                                    <span class="ms-2 fw-bold">10/10</span>
                                  </div>
                                </td>
                              </tr>
                              <tr>
                                <td>At home playing video games</td>
                                <td>
                                  <div class="d-flex align-items-center">
                                    <div class="progress flex-grow-1" style="height: 25px;">
                                      <div class="progress-bar bg-success" role="progressbar" style="width: 20%;" aria-valuenow="2" aria-valuemin="0" aria-valuemax="10">2</div>
                                    </div>
                                    <span class="ms-2 fw-bold">2/10</span>
                                  </div>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>

                        <div class="mt-3 p-3 bg-light rounded">
                          <h6 class="mb-2"><i class="fas fa-chart-line me-2 text-primary"></i>Therapist's Note:</h6>
                          <p class="mb-0">Clear pattern of elevated anxiety in situations involving potential social
                            evaluation and specific bullying-related triggers. Notably, anxiety levels reach maximum
                            severity (10/10) in gym class and when encountering specific peers associated with bullying
                            incidents. Safe spaces (gaming at home) show minimal anxiety, suggesting effective but
                            potentially problematic avoidance patterns.</p>
                        </div>


                      </div>
                    </div>
                  </div>                  
                  <div class="exercise-card mb-4">
                    <div class="card border-start border-success border-3">
                      <div class="card-header bg-light">
                        <div class="d-flex justify-content-between align-items-center">
                          <h6 class="mb-0"><i class="fas fa-brain text-primary me-2"></i>Exercise 2: Thought Recording
                          </h6>
                          <span class="badge bg-success">Completed May 13, 2025</span>
                        </div>
                      </div>
                      <div class="card-body">
                        <p class="mb-3">Please record situations that triggered anxiety and the thoughts that occurred:
                        </p>

                        <div class="accordion mb-3" id="thoughtAccordion">
                          
                          <div class="accordion-item">
                            <h2 class="accordion-header" id="headingOne">
                              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                <div class="d-flex justify-content-between w-100 me-3">
                                  <span><strong>Situation 1:</strong> Being called to present in History class</span>
                                  <span class="badge bg-danger">Anxiety: 9/10</span>
                                </div>
                              </button>
                            </h2>
                            <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#thoughtAccordion">
                              <div class="accordion-body">
                                <div class="form-group mb-3">
                                  <label class="form-label"><strong>What was going through your mind?</strong></label>
                                  <div class="form-control bg-light">
                                    Everyone will stare at me and laugh. I'll forget what I'm supposed to say. My voice
                                    will shake and crack. The bullies will record me and share it with everyone.
                                  </div>
                                </div>
                                <div class="form-group mb-3">
                                  <label class="form-label"><strong>Physical sensations:</strong></label>
                                  <div class="d-flex flex-wrap gap-2">
                                    <span class="badge bg-secondary p-2">Racing heart</span>
                                    <span class="badge bg-secondary p-2">Sweating</span>
                                    <span class="badge bg-secondary p-2">Shaking hands</span>
                                    <span class="badge bg-secondary p-2">Stomach pain</span>
                                    <span class="badge bg-secondary p-2">Dry mouth</span>
                                    <span class="badge bg-secondary p-2">Dizziness</span>
                                  </div>
                                </div>
                                <div class="form-group">
                                  <label class="form-label"><strong>What did you do?</strong></label>
                                  <div class="form-control bg-light">
                                    Asked to go to the restroom and stayed there until the presentations were over.
                                    Later asked my doctor for a note to excuse me from class presentations.
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>

                          
                          <div class="accordion-item">
                            <h2 class="accordion-header" id="headingTwo">
                              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                <div class="d-flex justify-content-between w-100 me-3">
                                  <span><strong>Situation 2:</strong> Seeing basketball team members in the
                                    hallway</span>
                                  <span class="badge bg-danger">Anxiety: 10/10</span>
                                </div>
                              </button>
                            </h2>
                            <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#thoughtAccordion">
                              <div class="accordion-body">
                                <div class="form-group mb-3">
                                  <label class="form-label"><strong>What was going through your mind?</strong></label>
                                  <div class="form-control bg-light">
                                    They're going to push me into the lockers again. Everyone will see me get
                                    humiliated. They'll call me names and laugh. No one will help me. I can't defend
                                    myself.
                                  </div>
                                </div>
                                <div class="form-group mb-3">
                                  <label class="form-label"><strong>Physical sensations:</strong></label>
                                  <div class="d-flex flex-wrap gap-2">
                                    <span class="badge bg-secondary p-2">Panic feeling</span>
                                    <span class="badge bg-secondary p-2">Chest tightness</span>
                                    <span class="badge bg-secondary p-2">Trouble breathing</span>
                                    <span class="badge bg-secondary p-2">Trembling</span>
                                    <span class="badge bg-secondary p-2">Nausea</span>
                                  </div>
                                </div>
                                <div class="form-group">
                                  <label class="form-label"><strong>What did you do?</strong></label>
                                  <div class="form-control bg-light">
                                    Turned around and went the long way to class. Was late and got detention, but felt
                                    it was better than facing them. Later had my mom email the school to get the
                                    detention removed.
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>

                          
                          <div class="accordion-item">
                            <h2 class="accordion-header" id="headingThree">
                              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                <div class="d-flex justify-content-between w-100 me-3">
                                  <span><strong>Situation 3:</strong> Sunday night before school week</span>
                                  <span class="badge bg-warning">Anxiety: 8/10</span>
                                </div>
                              </button>
                            </h2>
                            <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#thoughtAccordion">
                              <div class="accordion-body">
                                <div class="form-group mb-3">
                                  <label class="form-label"><strong>What was going through your mind?</strong></label>
                                  <div class="form-control bg-light">
                                    I can't handle another week of this. Everyone at school hates me. Tomorrow I'll have
                                    gym class and those guys will be there. What if they posted something new about me
                                    online? I'm going to fail my classes because I keep missing school.
                                  </div>
                                </div>
                                <div class="form-group mb-3">
                                  <label class="form-label"><strong>Physical sensations:</strong></label>
                                  <div class="d-flex flex-wrap gap-2">
                                    <span class="badge bg-secondary p-2">Can't sleep</span>
                                    <span class="badge bg-secondary p-2">Headache</span>
                                    <span class="badge bg-secondary p-2">Stomach pain</span>
                                    <span class="badge bg-secondary p-2">Restlessness</span>
                                  </div>
                                </div>
                                <div class="form-group">
                                  <label class="form-label"><strong>What did you do?</strong></label>
                                  <div class="form-control bg-light">
                                    Stayed up until 3 AM playing games to avoid thinking about school. Then told my mom
                                    I was sick in the morning so I could stay home. This has become a pattern almost
                                    every Monday.
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="mt-3 p-3 bg-light rounded">
                          <h6 class="mb-2"><i class="fas fa-chart-line me-2 text-primary"></i>Therapist's Note:</h6>
                          <p class="mb-0">Thought patterns show catastrophic thinking and anticipatory anxiety. Core
                            beliefs appear to center around social humiliation, helplessness, and inability to cope.
                            Avoidance behaviors are reinforced through immediate anxiety reduction, creating a
                            problematic cycle. Physical symptoms indicate significant autonomic nervous system
                            activation during anxiety episodes.</p>
                        </div>
                      </div>
                    </div>
                  </div>                  
                  <div class="exercise-card">
                    <div class="card border-start border-success border-3">
                      <div class="card-header bg-light">
                        <div class="d-flex justify-content-between align-items-center">
                          <h6 class="mb-0"><i class="fas fa-sort-amount-up text-success me-2"></i>Exercise 3: Fear &amp;
                            Avoidance Hierarchy</h6>
                          <span class="badge bg-success">Completed May 14, 2025</span>
                        </div>
                      </div>
                      <div class="card-body">
                        <p>Please rank these situations from least anxiety-provoking (1) to most anxiety-provoking (10):
                        </p>

                        <div class="fear-hierarchy mb-4">
                          <div class="hierarchy-item d-flex align-items-center p-2 mb-2 rounded" style="background-color: #f8d7da;">
                            <span class="hierarchy-rank me-3 fw-bold fs-5">10</span>
                            <div class="hierarchy-content flex-grow-1">
                              <div class="d-flex justify-content-between">
                                <div>Giving a presentation in front of the whole class</div>
                                <div class="hierarchy-indicator">
                                  <span class="badge bg-danger">Extreme</span>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="hierarchy-item d-flex align-items-center p-2 mb-2 rounded" style="background-color: #f8d7da;">
                            <span class="hierarchy-rank me-3 fw-bold fs-5">9</span>
                            <div class="hierarchy-content flex-grow-1">
                              <div class="d-flex justify-content-between">
                                <div>Being in gym class with the basketball team members</div>
                                <div class="hierarchy-indicator">
                                  <span class="badge bg-danger">Extreme</span>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="hierarchy-item d-flex align-items-center p-2 mb-2 rounded" style="background-color: #f8d7da;">
                            <span class="hierarchy-rank me-3 fw-bold fs-5">8</span>
                            <div class="hierarchy-content flex-grow-1">
                              <div class="d-flex justify-content-between">
                                <div>Eating lunch in the cafeteria</div>
                                <div class="hierarchy-indicator">
                                  <span class="badge bg-danger">Extreme</span>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="hierarchy-item d-flex align-items-center p-2 mb-2 rounded" style="background-color: #fff3cd;">
                            <span class="hierarchy-rank me-3 fw-bold fs-5">7</span>
                            <div class="hierarchy-content flex-grow-1">
                              <div class="d-flex justify-content-between">
                                <div>Walking through crowded hallways between classes</div>
                                <div class="hierarchy-indicator">
                                  <span class="badge bg-warning text-dark">High</span>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="hierarchy-item d-flex align-items-center p-2 mb-2 rounded" style="background-color: #fff3cd;">
                            <span class="hierarchy-rank me-3 fw-bold fs-5">6</span>
                            <div class="hierarchy-content flex-grow-1">
                              <div class="d-flex justify-content-between">
                                <div>Being called on by a teacher during class</div>
                                <div class="hierarchy-indicator">
                                  <span class="badge bg-warning text-dark">High</span>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="hierarchy-item d-flex align-items-center p-2 mb-2 rounded" style="background-color: #fff3cd;">
                            <span class="hierarchy-rank me-3 fw-bold fs-5">5</span>
                            <div class="hierarchy-content flex-grow-1">
                              <div class="d-flex justify-content-between">
                                <div>Walking to school in the morning</div>
                                <div class="hierarchy-indicator">
                                  <span class="badge bg-warning text-dark">Moderate</span>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="hierarchy-item d-flex align-items-center p-2 mb-2 rounded" style="background-color: #d1e7dd;">
                            <span class="hierarchy-rank me-3 fw-bold fs-5">4</span>
                            <div class="hierarchy-content flex-grow-1">
                              <div class="d-flex justify-content-between">
                                <div>Working on a group project with unfamiliar classmates</div>
                                <div class="hierarchy-indicator">
                                  <span class="badge bg-success">Moderate</span>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="hierarchy-item d-flex align-items-center p-2 mb-2 rounded" style="background-color: #d1e7dd;">
                            <span class="hierarchy-rank me-3 fw-bold fs-5">3</span>
                            <div class="hierarchy-content flex-grow-1">
                              <div class="d-flex justify-content-between">
                                <div>Joining an online gaming group voice chat with strangers</div>
                                <div class="hierarchy-indicator">
                                  <span class="badge bg-success">Low</span>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="hierarchy-item d-flex align-items-center p-2 mb-2 rounded" style="background-color: #d1e7dd;">
                            <span class="hierarchy-rank me-3 fw-bold fs-5">2</span>
                            <div class="hierarchy-content flex-grow-1">
                              <div class="d-flex justify-content-between">
                                <div>Talking with the one close friend I still have</div>
                                <div class="hierarchy-indicator">
                                  <span class="badge bg-success">Low</span>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="hierarchy-item d-flex align-items-center p-2 mb-2 rounded" style="background-color: #d1e7dd;">
                            <span class="hierarchy-rank me-3 fw-bold fs-5">1</span>
                            <div class="hierarchy-content flex-grow-1">
                              <div class="d-flex justify-content-between">
                                <div>Being alone in my room gaming or coding</div>
                                <div class="hierarchy-indicator">
                                  <span class="badge bg-success">Minimal</span>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="current-avoidance p-3 bg-light rounded mb-3">
                          <h6 class="mb-2"><i class="fas fa-ban text-danger me-2"></i>Current Avoidance Behaviors:</h6>
                          <div class="d-flex flex-wrap gap-2">
                            <span class="badge bg-danger p-2">Missing school entirely (2-3 days/week)</span>
                            <span class="badge bg-danger p-2">Skipping gym class (100% avoidance)</span>
                            <span class="badge bg-danger p-2">Avoiding cafeteria at lunch (eats in counselor's
                              office)</span>
                            <span class="badge bg-danger p-2">Refusing to give presentations (takes grade
                              penalties)</span>
                            <span class="badge bg-warning text-dark p-2">Taking alternate routes to classes</span>
                            <span class="badge bg-warning text-dark p-2">Using restroom during partner/group work</span>
                          </div>
                        </div>

                        <div class="mt-3 p-3 bg-light rounded">
                          <h6 class="mb-2"><i class="fas fa-chart-line me-2 text-primary"></i>Therapist's Note:</h6>
                          <p class="mb-0">Fear hierarchy shows clear pattern of social and evaluative fears, with
                            highest anxiety triggered by situations involving performance or presence of bullying peers.
                            Current avoidance behaviors are severe and significantly impacting educational functioning.
                            Hierarchy provides excellent baseline for developing graduated exposure therapy plan,
                            starting with lower anxiety situations (3-4 range) and progressing gradually.</p>
                        </div>
                      </div>
                    </div>
                  </div>
        </div>

        <div id="problem-symptoms" class="tab-content">
          <h3 class="content-title">Problems and symptoms</h3>
          <div class="card shadow-sm mb-4">
            <div class="card-header d-flex justify-content-between align-items-center" id="headingTable">
              <h5 class="mb-0">
                <button class="btn btn-link text-decoration-none d-flex align-items-center" data-bs-toggle="collapse" data-bs-target="#collapseTable" aria-expanded="false" aria-controls="collapseTable">
                  <span>🔎 Case details: Anxiety Disorder</span>
                </button>
              </h5>
              <i class="fas fa-chevron-down rotate-icon transition rotate" id="toggleIcon"></i>
            </div>

            <div id="collapseTable" class="collapse show">
              <div class="card-body">
                <table class="table table-bordered table-hover">
                  <thead class="table-light">
                    <tr>
                      <th scope="col">Category</th>
                      <th scope="col">Content</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>Target appeals</td>
                      <td class="editable-cell">
                        <div class="cell-content">
                          Severe anxiety in social situations, school attendance issues,
                          avoiding previously enjoyed activities. The main goal is to reduce
                          anxiety symptoms, develop effective coping skills, and improve school
                          attendance. Family involvement is necessary for support.
                        </div>
                        <i class="fas fa-pen edit-icon"></i>
                      </td>
                    </tr>
                    <tr>
                      <td>Clinical symptoms</td>
                      <td class="editable-cell">
                        <div class="cell-content">
                          Persistent anxiety, panic attacks when facing social situations,
                          sleep disturbances (difficulty falling asleep), physical symptoms
                          (stomach pain, headaches) before school, irritability, avoidance
                          of social interactions, and school refusal behaviors.
                        </div>
                        <i class="fas fa-pen edit-icon"></i>
                      </td>
                    </tr>
                    <tr>
                      <td>Somatic/biological background</td>
                      <td class="editable-cell">
                        <div class="cell-content">
                          Overall physical health is good. No significant medical conditions.
                          History of stress-related stomach aches and headaches. Normal developmental
                          history. Sleep disruption reported in the last 3 months. No medication
                          currently prescribed.
                        </div>
                        <i class="fas fa-pen edit-icon"></i>
                      </td>
                    </tr>
                    <tr>
                      <td>Family context</td>
                      <td class="editable-cell">
                        <div class="cell-content">
                          Nuclear family with parents and younger sister (10). Parents report high
                          stress levels due to work demands. Father tends to minimize emotional concerns.
                          Mother is supportive but anxious herself. Family is willing to participate
                          in therapy sessions as needed.
                        </div>
                        <i class="fas fa-pen edit-icon"></i>
                      </td>
                    </tr>
                    <tr>
                      <td>School/educational situation</td>
                      <td class="editable-cell">
                        <div class="cell-content">
                          Grade 9, previously good academic performance now declining. Reported
                          bullying incidents in the past semester. 40% attendance rate in the last
                          month. Teachers note he is quiet but capable when present. School counselor
                          is concerned about social withdrawal and academic impact.
                        </div>
                        <i class="fas fa-pen edit-icon"></i>
                      </td>
                    </tr>
                    <tr>
                      <td>Resources and support</td>
                      <td class="editable-cell">
                        <div class="cell-content">
                          School counselor is involved and supportive. Has one close friend who
                          maintains contact. Enjoys gaming and computer programming (potential
                          therapeutic tools). Personal strengths include intelligence, creativity,
                          problem-solving abilities, and sense of humor when comfortable.
                        </div>
                        <i class="fas fa-pen edit-icon"></i>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="card shadow-sm">
            <div class="card-header d-flex justify-content-between align-items-center" id="headingTableHistory">
              <h5 class="mb-0">
                <button class="btn btn-link text-decoration-none d-flex align-items-center" data-bs-toggle="collapse" data-bs-target="#collapseTableHistory" aria-expanded="false" aria-controls="collapseTableHistory">
                  <span>🔎 History of behavior, social development, and significant events</span>
                </button>
              </h5>
              <i class="fas fa-chevron-down rotate-icon transition rotate" id="toggleIconHistory"></i>
            </div>

            <div id="collapseTableHistory" class="collapse show">
              <div class="card-body">
                <table class="table table-bordered table-hover">
                  <thead class="table-light">
                    <tr>
                      <th scope="col">Category</th>
                      <th scope="col">Content</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>Early development</td>
                      <td class="editable-cell">
                        <div class="cell-content">
                          Normal early development with no significant delays. Was described as a
                          shy but happy child. Some separation anxiety noted when starting primary school
                          but resolved within a month.
                        </div>
                        <i class="fas fa-pen edit-icon"></i>
                      </td>
                    </tr>
                    <tr>
                      <td>Social history</td>
                      <td class="editable-cell">
                        <div class="cell-content">
                          Had a small but stable friend group through elementary school. Social difficulties
                          began after transitioning to high school last year. Gradual withdrawal from
                          social activities in the past 6 months.
                        </div>
                        <i class="fas fa-pen edit-icon"></i>
                      </td>
                    </tr>
                    <tr>
                      <td>Significant events</td>
                      <td class="editable-cell">
                        <div class="cell-content">
                          Bullying incidents began 8 months ago after joining the school basketball team.
                          Reports being mocked about his appearance and athletic abilities. One serious
                          incident involved cyberbullying where embarrassing photos were shared online 3 months ago.
                        </div>
                        <i class="fas fa-pen edit-icon"></i>
                      </td>
                    </tr>
                    <tr>
                      <td>Behavioral changes</td>
                      <td class="editable-cell">
                        <div class="cell-content">
                          Progressive increase in avoidance behaviors. Initially refused only basketball
                          practice, then gym class, now refusing school entirely on most days. Spending
                          increased time in his room gaming and coding. Sleep schedule has become irregular.
                        </div>
                        <i class="fas fa-pen edit-icon"></i>
                      </td>
                    </tr>
                    <tr>
                      <td>Previous interventions</td>
                      <td class="editable-cell">
                        <div class="cell-content">
                          Met with school counselor weekly for the past 2 months with minimal improvement.
                          School implemented an anti-bullying intervention with mixed results. Parents
                          attempted various incentives for school attendance without success.
                        </div>
                        <i class="fas fa-pen edit-icon"></i>
                      </td>
                    </tr>
                    <tr>
                      <td>Current state</td>
                      <td class="editable-cell">
                        <div class="cell-content">
                          Shows significant anxiety symptoms, especially regarding school attendance.
                          Reports feeling "on edge" most of the time. Experiencing sleep disturbances,
                          difficulty concentrating, and occasional panic symptoms when pressured to attend school.
                          Expresses feelings of shame and worthlessness related to bullying experiences.
                        </div>
                        <i class="fas fa-pen edit-icon"></i>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>


  <div class="module-content" id="treatment-module">
    <div class="content-area">
      
      <div class="vertical-tabs">
        <button class="vertical-tab active" onclick="showContent('treatment-overview', 'treatment')">
          Overview
        </button>

      </div>

      
      <div id="treatment-overview" class="tab-content active">
        <h3 class="content-title">Treatment Plan Overview</h3>
        <div class="card shadow-sm mb-4">
          <div class="card-body">
            <div class="alert alert-success mb-4">
              <h5><i class="fas fa-check-circle me-2"></i>Active Treatment Plan</h5>
              <p class="mb-0">Last updated: May 11, 2025 • Duration: 6 months</p>
            </div>

            <h5 class="card-title">Treatment Approach</h5>
            <p>Cognitive Behavioral Therapy (CBT) focused on anxiety management with supplementary family therapy
              sessions.</p>

            <div class="row mt-4">
              <div class="col-md-6">
                <div class="card h-100 border-success">
                  <div class="card-header bg-success bg-opacity-10 text-black fw-bold">
                    Primary Focus Areas
                  </div>
                  <div class="card-body">
                    <ul class="list-group list-group-flush">
                      <li class="list-group-item d-flex align-items-center">
                        <i class="fas fa-check text-success me-2"></i>
                        School anxiety management
                      </li>
                      <li class="list-group-item d-flex align-items-center">
                        <i class="fas fa-check text-success me-2"></i>
                        Social skills development
                      </li>
                      <li class="list-group-item d-flex align-items-center">
                        <i class="fas fa-check text-success me-2"></i>
                        Family communication patterns
                      </li>
                      <li class="list-group-item d-flex align-items-center">
                        <i class="fas fa-check text-success me-2"></i>
                        Emotional regulation techniques
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="timeline-container">
          <div class="timeline-item">
            <span class="timeline-dot completed"></span>
            
            <div class="card shadow-sm mb-4">
              <div class="card-header bg-success-subtle d-flex justify-content-between align-items-center" id="depressionHeader" data-bs-toggle="collapse" data-bs-target="#depressionContent" aria-expanded="false" aria-controls="depressionContent" style="cursor: pointer;">
                <h5 class="mb-0">
                  <span class="text-black d-flex align-items-center fs-5">
                    <span>Anxiety introduction module</span>
                  </span>
                </h5>
                <span class="badge bg-success text-white fs-6">Completed</span>
              </div>
              <div id="depressionContent" class="collapse" aria-labelledby="depressionHeader">
                <div class="card-body">
                  <p id="intro-desc">This module provides an initial assessment and orientation to the depression
                    treatment program.</p>

                  <div class="row">
                    <div class="col-md-6">
                      <h5 id="intro-assessment-title">Initial Assessment Results</h5>
                      <ul class="custom-list">
                        <li id="intro-assessment-1">PHQ-9 Score: 16 (Moderately severe)</li>
                        <li id="intro-assessment-2">Duration: 4 months</li>
                        <li id="intro-assessment-3">Sleep: Moderate disturbance</li>
                        <li id="intro-assessment-4">Appetite: Mild changes</li>
                        <li id="intro-assessment-5">Energy: Significantly reduced</li>
                        <li id="intro-assessment-6">Concentration: Moderately impaired</li>
                      </ul>
                    </div>
                    <div class="col-md-6">
                      <h5 id="intro-risk-title">Risk Assessment</h5>
                      <div class="table-responsive">
                        <table class="table table-sm">
                          <thead>
                            <tr>
                              <th>Risk Factor</th>
                              <th>Status</th>
                              <th>Action</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td>Suicidal Ideation</td>
                              <td><span class="badge bg-warning">Passive</span></td>
                              <td>Monitoring</td>
                            </tr>
                            <tr>
                              <td>Self-harm</td>
                              <td><span class="badge bg-success">None</span></td>
                              <td>--</td>
                            </tr>
                            <tr>
                              <td>Substance Use</td>
                              <td><span class="badge bg-success">None</span></td>
                              <td>--</td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>

                  <h5 id="intro-goals-title" class="mt-4">Treatment Goals (Established)</h5>
                  <div class="row mb-3">
                    <div class="col-md-6">
                      <div class="progress-wrapper">
                        <div class="d-flex justify-content-between">
                          <span>Reduce depressive symptoms (PHQ-9 &lt; 10)</span>
                          <span>40%</span>
                        </div>
                        <div class="progress">
                          <div class="progress-bar bg-info" role="progressbar" style="width: 40%" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                      </div>

                      <div class="progress-wrapper">
                        <div class="d-flex justify-content-between">
                          <span>Improve school attendance</span>
                          <span>60%</span>
                        </div>
                        <div class="progress">
                          <div class="progress-bar bg-info" role="progressbar" style="width: 60%" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                      </div>

                      <div class="progress-wrapper">
                        <div class="d-flex justify-content-between">
                          <span>Increase social engagement</span>
                          <span>30%</span>
                        </div>
                        <div class="progress">
                          <div class="progress-bar bg-info" role="progressbar" style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                      </div>
                    </div>

                    <div class="col-md-6">
                      <div class="progress-wrapper">
                        <div class="d-flex justify-content-between">
                          <span>Develop coping strategies</span>
                          <span>25%</span>
                        </div>
                        <div class="progress">
                          <div class="progress-bar bg-info" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                      </div>

                      <div class="progress-wrapper">
                        <div class="d-flex justify-content-between">
                          <span>Improve family communication</span>
                          <span>45%</span>
                        </div>
                        <div class="progress">
                          <div class="progress-bar bg-info" role="progressbar" style="width: 45%" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                      </div>

                      <div class="progress-wrapper">
                        <div class="d-flex justify-content-between">
                          <span>Sleep regulation</span>
                          <span>35%</span>
                        </div>
                        <div class="progress">
                          <div class="progress-bar bg-info" role="progressbar" style="width: 35%" aria-valuenow="35" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="interactive-exercise">
                    <h5 id="intro-family-title">Family Engagement Assessment</h5>
                    <div class="form-group">
                      <label>Parent Involvement Level:</label>
                      <select class="form-select" id="parentInvolvement">
                        <option value="low">Low</option>
                        <option value="moderate" selected="">Moderate</option>
                        <option value="high">High</option>
                      </select>
                    </div>
                    <div class="mt-3">
                      <label>Family Session Attendance:</label>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="session1" checked="" disabled="">
                        <label class="form-check-label" for="session1">Initial Assessment (3/15/25)</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="session2" checked="" disabled="">
                        <label class="form-check-label" for="session2">Family Psychoeducation (3/29/25)</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="session3">
                        <label class="form-check-label" for="session3">Next Family Session (5/15/25)</label>
                      </div>
                    </div>

                  </div>

                  <div class="alert alert-info" id="intro-note">
                    <strong>Clinical Note:</strong> Initial assessment indicates moderate to severe depression with
                    significant impact on functioning. Patient demonstrates good insight and motivation for treatment.
                    No current suicidal ideation reported, but history of passive thoughts requires monitoring.
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="timeline-item">
            <span class="timeline-dot completed"></span>
            
            <div class="card shadow-sm mb-4">
              <div class="card-header bg-success-subtle d-flex justify-content-between align-items-center" id="psychoeducationHeader" data-bs-toggle="collapse" data-bs-target="#psychoeducationContent" aria-expanded="false" aria-controls="psychoeducationContent" style="cursor: pointer;">
                <h5 class="mb-0">
                  <span class="text-black d-flex align-items-center fs-5">
                    <span>Psychoeducation</span>
                  </span>
                </h5>
                <span class="badge bg-success text-white fs-6">Completed</span>
              </div>
              <div id="psychoeducationContent" class="collapse" aria-labelledby="psychoeducationHeader">
                <div class="card-body">
                  <p class="mb-0 fs-5">This section contains additional information about the treatment plan that may be
                    helpful for reference.</p>
                  <ul class="mt-3 fs-5">
                    <li>Feature psychoeducation-module</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div class="timeline-item">
            <span class="timeline-dot in-progress"></span>
            
            <div class="card shadow-sm mb-4">
              <div class="card-header bg-warning-subtle d-flex justify-content-between align-items-center" id="behavioralHeader" data-bs-toggle="collapse" data-bs-target="#behavioralContent" aria-expanded="false" aria-controls="behavioralContent" style="cursor: pointer;">
                <h5 class="mb-0">
                  <span class="text-black d-flex align-items-center fs-5">
                    <span>Behavioral activation</span>
                  </span>
                </h5>
                <span class="badge bg-warning text-dark fs-6">In Progress</span>
              </div>
              <div id="behavioralContent" class="collapse" aria-labelledby="behavioralHeader">
                <div class="card-body">
                  <p id="behavioral-desc">This module focuses on increasing engagement in positive activities to improve
                    mood and reduce depressive symptoms.</p>

                  <div class="row mb-4">
                    <div class="col-md-8">
                      <h5 id="behavioral-overview-title">Overview</h5>
                      <p id="behavioral-overview-text">Behavioral activation is based on the understanding that
                        depression leads to withdrawal from rewarding activities, which further worsens mood. By
                        scheduling and engaging in positive activities, even when motivation is low, we can break this
                        cycle and improve mood.</p>
                    </div>
                    <div class="col-md-4">
                      <div class="card bg-light">
                        <div class="card-body">
                          <h6 class="card-title">Quick Stats</h6>
                          <div class="d-flex justify-content-between mb-2">
                            <span>Sessions completed:</span>
                            <strong>3/6</strong>
                          </div>
                          <div class="d-flex justify-content-between mb-2">
                            <span>Scheduled activities:</span>
                            <strong>7</strong>
                          </div>
                          <div class="d-flex justify-content-between">
                            <span>Completion rate:</span>
                            <strong>43%</strong>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <h5 id="behavioral-activity-log-title">Activity Monitoring Log</h5>
                  <p id="behavioral-activity-log-desc">The patient has been tracking daily activities and associated
                    mood ratings (1-10 scale):</p>

                  <div class="table-responsive mb-4">
                    <table class="table table-bordered">
                      <thead class="table-light">
                        <tr>
                          <th id="behavioral-log-header-day">Day</th>
                          <th id="behavioral-log-header-activity">Activity</th>
                          <th id="behavioral-log-header-mood">Mood Rating (1-10)</th>
                          <th id="behavioral-log-header-notes">Notes</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td id="behavioral-log-day-1">Monday</td>
                          <td id="behavioral-log-activity-1">School, homework, video games</td>
                          <td id="behavioral-log-mood-1">4</td>
                          <td id="behavioral-log-notes-1">Felt tired all day, struggled to focus</td>
                        </tr>
                        <tr>
                          <td id="behavioral-log-day-2">Tuesday</td>
                          <td id="behavioral-log-activity-2">School, basketball practice, homework</td>
                          <td id="behavioral-log-mood-2">6</td>
                          <td id="behavioral-log-notes-2">Felt better after exercise</td>
                        </tr>
                        <tr>
                          <td id="behavioral-log-day-3">Wednesday</td>
                          <td id="behavioral-log-activity-3">School, stayed in room all evening</td>
                          <td id="behavioral-log-mood-3">3</td>
                          <td id="behavioral-log-notes-3">Had argument with mom, felt very low</td>
                        </tr>
                        <tr>
                          <td id="behavioral-log-day-4">Thursday</td>
                          <td id="behavioral-log-activity-4">School, study group, brief walk</td>
                          <td id="behavioral-log-mood-4">5</td>
                          <td id="behavioral-log-notes-4">Group project went well, felt accomplished</td>
                        </tr>
                        <tr>
                          <td id="behavioral-log-day-5">Friday</td>
                          <td id="behavioral-log-activity-5">School, met friend for coffee, movie night</td>
                          <td id="behavioral-log-mood-5">7</td>
                          <td id="behavioral-log-notes-5">Best day of the week, enjoyed social time</td>
                        </tr>
                        <tr>
                          <td id="behavioral-log-day-6">Saturday</td>
                          <td id="behavioral-log-activity-6">Slept late, homework, video games</td>
                          <td id="behavioral-log-mood-6">5</td>
                          <td id="behavioral-log-notes-6">Relaxing but felt unproductive</td>
                        </tr>
                        <tr>
                          <td id="behavioral-log-day-7">Sunday</td>
                          <td id="behavioral-log-activity-7">Family lunch, studied, brief walk</td>
                          <td id="behavioral-log-mood-7">4</td>
                          <td id="behavioral-log-notes-7">Anxious about upcoming week</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>

                  <div class="row mb-4">

                    <div class="col-md-6">
                      <div class="card">
                        <div class="card-header bg-light">
                          <h5 id="behavioral-activity-correlation-title" class="mb-0">Activity-Mood Correlation</h5>
                        </div>
                        <div class="card-body">
                          <ul class="list-group list-group-flush">
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                              Physical Exercise
                              <span class="badge bg-success rounded-pill">+2.3 points</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                              Social Interaction
                              <span class="badge bg-success rounded-pill">+2.1 points</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                              Outdoor Activities
                              <span class="badge bg-success rounded-pill">+1.8 points</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                              Creative Activities
                              <span class="badge bg-success rounded-pill">+1.2 points</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                              Screen Time &gt; 4hrs
                              <span class="badge bg-danger rounded-pill">-1.5 points</span>
                            </li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>

                  <h5 id="behavioral-pleasant-title">Pleasant Activities List</h5>
                  <p id="behavioral-pleasant-desc">The patient has identified the following activities as potentially
                    mood-enhancing:</p>

                  <div class="row mb-4">
                    <div class="col-md-4">
                      <div class="card h-100">
                        <div class="card-header bg-light">
                          <h6 id="behavioral-pleasant-physical-title" class="mb-0">Physical Activities</h6>
                        </div>
                        <div class="card-body">
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="physical1" checked="">
                            <label class="form-check-label" for="physical1" id="behavioral-physical-1">Basketball
                              practice</label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="physical2" checked="">
                            <label class="form-check-label" for="physical2" id="behavioral-physical-2">Walking
                              outdoors</label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="physical3">
                            <label class="form-check-label" for="physical3" id="behavioral-physical-3">Bike
                              riding</label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="physical4">
                            <label class="form-check-label" for="physical4" id="behavioral-physical-4">Swimming</label>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="card h-100">
                        <div class="card-header bg-light">
                          <h6 id="behavioral-pleasant-social-title" class="mb-0">Social Activities</h6>
                        </div>
                        <div class="card-body">
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="social1" checked="">
                            <label class="form-check-label" for="social1" id="behavioral-social-1">Coffee with
                              friends</label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="social2">
                            <label class="form-check-label" for="social2" id="behavioral-social-2">Movie nights</label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="social3">
                            <label class="form-check-label" for="social3" id="behavioral-social-3">Study group</label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="social4">
                            <label class="form-check-label" for="social4" id="behavioral-social-4">Family game
                              night</label>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="card h-100">
                        <div class="card-header bg-light">
                          <h6 id="behavioral-pleasant-personal-title" class="mb-0">Personal Activities</h6>
                        </div>
                        <div class="card-body">
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="personal1" checked="">
                            <label class="form-check-label" for="personal1" id="behavioral-personal-1">Reading
                              fiction</label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="personal2">
                            <label class="form-check-label" for="personal2" id="behavioral-personal-2">Drawing/art</label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="personal3">
                            <label class="form-check-label" for="personal3" id="behavioral-personal-3">Listening to
                              music</label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="personal4">
                            <label class="form-check-label" for="personal4" id="behavioral-personal-4">Cooking new
                              recipes</label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <h5 id="behavioral-activity-schedule-title">Weekly Activity Schedule (Current Week)</h5>
                  <p id="behavioral-activity-schedule-desc">The patient has committed to the following activities this
                    week:</p>

                  <div class="table-responsive mb-4">
                    <input type="text" class="form-control"><table class="table table-bordered">
                      <thead class="table-light">
                        <tr>
                          <th id="behavioral-schedule-header-day">Day</th>
                          <th id="behavioral-schedule-header-planned">Planned Activity</th>
                          <th id="behavioral-schedule-header-completed">Completed?</th>
                          <th id="behavioral-schedule-header-mood">Mood After (1-10)</th>
                          <th id="behavioral-schedule-header-obstacles">Obstacles/Facilitators</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td id="behavioral-schedule-day-1">Monday</td>
                          <td id="behavioral-schedule-planned-1">15-minute walk after school</td>
                          <td id="behavioral-schedule-completed-1">
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="completed1" checked="">
                              <label class="form-check-label" for="completed1"></label>
                            </div>
                          </td>
                          <td id="behavioral-schedule-mood-1">
                            <input type="number" class="form-control" min="1" max="10" value="6">
                          </td>
                          <td id="behavioral-schedule-obstacles-1">
                            <input type="text" class="form-control" value="Weather was nice">
                          </td>
                        </tr>
                        <tr>
                          <td id="behavioral-schedule-day-2">Tuesday</td>
                          <td id="behavioral-schedule-planned-2">Basketball practice</td>
                          <td id="behavioral-schedule-completed-2">
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="completed2" checked="">
                              <label class="form-check-label" for="completed2"></label>
                            </div>
                          </td>
                          <td id="behavioral-schedule-mood-2">
                            <input type="number" class="form-control" min="1" max="10" value="7">
                          </td>
                          <td id="behavioral-schedule-obstacles-2">
                            <input type="text" class="form-control" value="Friend encouraged me to go">
                          </td>
                        </tr>
                        <tr>
                          <td id="behavioral-schedule-day-3">Wednesday</td>
                          <td id="behavioral-schedule-planned-3">Read for 30 minutes</td>
                          <td id="behavioral-schedule-completed-3">
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="completed3" checked="">
                              <label class="form-check-label" for="completed3"></label>
                            </div>
                          </td>
                          <td id="behavioral-schedule-mood-3">
                            <input type="number" class="form-control" min="1" max="10" value="5">
                          </td>
                          <td id="behavioral-schedule-obstacles-3">
                            <input type="text" class="form-control" value="Hard to focus, tired">
                          </td>
                        </tr>
                        <tr>
                          <td id="behavioral-schedule-day-4">Thursday</td>
                          <td id="behavioral-schedule-planned-4">Study group at library</td>
                          
                          
                        </tr>
                        <tr>
                          <td id="behavioral-schedule-day-5">Friday</td>
                          <td id="behavioral-schedule-planned-5">Coffee with Alex after school</td>
                          <td id="behavioral-schedule-completed-5">
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="completed5">
                              <label class="form-check-label" for="completed5"></label>
                            </div>
                          </td>
                          <td id="behavioral-schedule-mood-5">
                            <input type="number" class="form-control" min="1" max="10">
                          </td>
                          <td id="behavioral-schedule-obstacles-5">
                            <input type="text" class="form-control">
                          </td>
                        </tr>
                        <tr>
                          <td id="behavioral-schedule-day-6">Saturday</td>
                          <td id="behavioral-schedule-planned-6">Family walk in the park (30 min)</td>
                          <td id="behavioral-schedule-completed-6">
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="completed6">
                              <label class="form-check-label" for="completed6"></label>
                            </div>
                          </td>
                          <td id="behavioral-schedule-mood-6">
                            <input type="number" class="form-control" min="1" max="10">
                          </td>
                          <td id="behavioral-schedule-obstacles-6">
                            <input type="text" class="form-control">
                          </td>
                        </tr>
                        <tr>
                          <td id="behavioral-schedule-day-7">Sunday</td>
                          <td id="behavioral-schedule-planned-7">Try new pasta recipe for dinner</td>
                          <td id="behavioral-schedule-completed-7">
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="completed7">
                              <label class="form-check-label" for="completed7"></label>
                            </div>
                          </td>
                          <td id="behavioral-schedule-mood-7">
                            <input type="number" class="form-control" min="1" max="10">
                          </td>
                          <td id="behavioral-schedule-obstacles-7">
                            <input type="text" class="form-control">
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>

                  <div class="row mb-4">
                    <div class="col-12">
                      <div class="card">
                        <div class="card-header bg-light">
                          <h5 id="behavioral-next-steps-title" class="mb-0">Next Steps</h5>
                        </div>
                        <div class="card-body">
                          <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="next-step-1">
                            <label class="form-check-label" for="next-step-1">
                              Increase frequency of physical activities to 3x per week
                            </label>
                          </div>
                          <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="next-step-2">
                            <label class="form-check-label" for="next-step-2">
                              Introduce one new social activity next week
                            </label>
                          </div>
                          <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="next-step-3">
                            <label class="form-check-label" for="next-step-3">
                              Practice identifying early warning signs of mood decline
                            </label>
                          </div>
                          <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="next-step-4">
                            <label class="form-check-label" for="next-step-4">
                              Review potential obstacles and develop contingency plans
                            </label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="alert alert-info" id="behavioral-notes">
                    <strong>Clinical Notes:</strong> Patient is showing good engagement with behavioral activation.
                    Initial resistance to scheduling activities has decreased. Notable improvement in mood following
                    physical activities and social interactions. Will continue to build on these patterns and gradually
                    increase activity complexity and duration. Therapy adherence currently at 75%. Consider reinforcing
                    connection between activity completion and mood improvement.
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="timeline-item">
            <span class="timeline-dot not-started"></span>
            
            <div class="card shadow-sm mb-4">
              <div class="card-header bg-light d-flex justify-content-between align-items-center" id="problemSolvingHeader" data-bs-toggle="collapse" data-bs-target="#problemSolvingContent" aria-expanded="false" aria-controls="problemSolvingContent" style="cursor: pointer;">
                <h5 class="mb-0">
                  <span class="text-black d-flex align-items-center fs-5">
                    <span>Problem Solving</span>
                  </span>
                </h5>
                <span class="badge bg-secondary text-white fs-6">Not Started</span>
              </div>
              <div id="problemSolvingContent" class="collapse" aria-labelledby="problemSolvingHeader">
                <div class="card-body">
                  <p id="problem-desc">This module focuses on developing systematic approaches to solving problems that
                    contribute to depression.</p>

                  <div class="row mb-4">
                    <div class="col-md-8">
                      <h5 id="problem-overview-title">Module Overview</h5>
                      <p id="problem-overview-text">Problem-solving therapy helps patients identify specific problems in
                        their lives, generate potential solutions, select the most promising approach, and implement and
                        evaluate the outcomes.</p>
                    </div>
                    <div class="col-md-4">
                      <div class="card bg-light">
                        <div class="card-body">
                          <h6 class="card-title">Module Timeline</h6>
                          <div class="d-flex justify-content-between mb-2">
                            <span>Scheduled start:</span>
                            <strong>June 15, 2023</strong>
                          </div>
                          <div class="d-flex justify-content-between mb-2">
                            <span>Estimated duration:</span>
                            <strong>3 weeks</strong>
                          </div>
                          <div class="d-flex justify-content-between">
                            <span>Current status:</span>
                            <strong>Pending</strong>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row mb-4">
                    <div class="col-12">
                      <div class="card">
                        <div class="card-header bg-light">
                          <h5 id="problem-key-components-title" class="mb-0">Key Components</h5>
                        </div>
                        <div class="card-body">
                          <div class="row">
                            <div class="col-md-6">
                              <div class="card mb-3">
                                <div class="card-body">
                                  <h6 class="card-title">Problem Identification</h6>
                                  <p class="card-text">Clear and specific definition of problems that contribute to
                                    depression.</p>
                                </div>
                              </div>
                            </div>
                            <div class="col-md-6">
                              <div class="card mb-3">
                                <div class="card-body">
                                  <h6 class="card-title">Solution Generation</h6>
                                  <p class="card-text">Brainstorming multiple potential solutions without immediate
                                    judgment.</p>
                                </div>
                              </div>
                            </div>
                            <div class="col-md-6">
                              <div class="card mb-3">
                                <div class="card-body">
                                  <h6 class="card-title">Decision Making</h6>
                                  <p class="card-text">Evaluating pros and cons of each solution and selecting the most
                                    promising approach.</p>
                                </div>
                              </div>
                            </div>
                            <div class="col-md-6">
                              <div class="card mb-3">
                                <div class="card-body">
                                  <h6 class="card-title">Implementation &amp; Review</h6>
                                  <p class="card-text">Creating an action plan, implementing the solution, and
                                    evaluating outcomes.</p>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row mb-4">
                    <div class="col-12">
                      <div class="card">
                        <div class="card-header bg-light">
                          <h5 id="problem-goals-title" class="mb-0">Module Goals</h5>
                        </div>
                        <div class="card-body">
                          <div class="row">
                            <div class="col-md-12">
                              <ul class="list-group list-group-flush">
                                <li class="list-group-item d-flex align-items-center">
                                  <i class="bi bi-check-circle text-muted me-3"></i>
                                  <span>Identify at least 3 significant problems contributing to current depressive
                                    symptoms</span>
                                </li>
                                <li class="list-group-item d-flex align-items-center">
                                  <i class="bi bi-check-circle text-muted me-3"></i>
                                  <span>Learn and apply structured problem-solving framework to daily challenges</span>
                                </li>
                                <li class="list-group-item d-flex align-items-center">
                                  <i class="bi bi-check-circle text-muted me-3"></i>
                                  <span>Reduce feelings of being overwhelmed by breaking problems into manageable
                                    steps</span>
                                </li>
                                <li class="list-group-item d-flex align-items-center">
                                  <i class="bi bi-check-circle text-muted me-3"></i>
                                  <span>Successfully implement solutions for at least 2 identified problems</span>
                                </li>
                                <li class="list-group-item d-flex align-items-center">
                                  <i class="bi bi-check-circle text-muted me-3"></i>
                                  <span>Develop confidence in ability to address future problems independently</span>
                                </li>
                              </ul>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row mb-4">
                    <div class="col-12">
                      <div class="card">
                        <div class="card-header bg-light">
                          <h5 id="problem-prep-title" class="mb-0">Preparation Work</h5>
                        </div>
                        <div class="card-body">
                          <p>Before beginning this module, please review the following resources:</p>

                          <div class="mb-3">
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="prep-1">
                              <label class="form-check-label" for="prep-1">
                                Review "Introduction to Problem-Solving" handout
                              </label>
                            </div>
                          </div>
                          <div class="mb-3">
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="prep-2">
                              <label class="form-check-label" for="prep-2">
                                Complete "Problem Inventory" worksheet
                              </label>
                            </div>
                          </div>
                          <div class="mb-3">
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="prep-3">
                              <label class="form-check-label" for="prep-3">
                                Watch video: "Problem-Solving Basics" (15 min)
                              </label>
                            </div>
                          </div>
                          <div class="mb-3">
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="prep-4">
                              <label class="form-check-label" for="prep-4">
                                Journal about recent problems and attempted solutions
                              </label>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="alert alert-secondary" id="problem-pending">
                    <i class="bi bi-info-circle"></i> This module has not been started yet. It will be introduced in
                    session 5 after completion of the Behavioral Activation module.
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="timeline-item">
            <span class="timeline-dot not-started"></span>
            
            <div class="card shadow-sm mb-4">
              <div class="card-header bg-light d-flex justify-content-between align-items-center" id="cognitiveHeader" data-bs-toggle="collapse" data-bs-target="#cognitiveContent" aria-expanded="false" aria-controls="cognitiveContent" style="cursor: pointer;">
                <h5 class="mb-0">
                  <span class="text-black d-flex align-items-center fs-5">
                    <span>Cognitive restructuring</span>
                  </span>
                </h5>
                <span class="badge bg-secondary text-white fs-6">Not Started</span>
              </div>
              <div id="cognitiveContent" class="collapse" aria-labelledby="cognitiveHeader">
                <div class="card-body">
                  <p id="cognitive-desc">This module focuses on identifying and challenging negative thought patterns
                    that maintain depression.</p>

                  <h5 id="cognitive-overview-title">Overview</h5>
                  <p id="cognitive-overview-text">Cognitive restructuring helps patients identify distorted thoughts,
                    evaluate their accuracy, and develop more balanced alternative perspectives.</p>

                  <h5 id="cognitive-distortions-title">Common Cognitive Distortions</h5>
                  <div class="row mb-4">
                    <div class="col-md-6">
                      <div class="card h-100">
                        <div class="card-body">
                          <h6 id="cognitive-distortion-1-title">All-or-Nothing Thinking</h6>
                          <p id="cognitive-distortion-1-desc">Seeing situations in black-and-white terms</p>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="cognitive-distortion-1-check">
                            <label class="form-check-label" for="cognitive-distortion-1-check">Present in
                              patient</label>
                          </div>
                          <input type="text" class="form-control mt-2" placeholder="Examples from patient...">
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="card h-100">
                        <div class="card-body">
                          <h6 id="cognitive-distortion-2-title">Catastrophizing</h6>
                          <p id="cognitive-distortion-2-desc">Predicting the worst possible outcome</p>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="cognitive-distortion-2-check">
                            <label class="form-check-label" for="cognitive-distortion-2-check">Present in
                              patient</label>
                          </div>
                          <input type="text" class="form-control mt-2" placeholder="Examples from patient...">
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row mb-4">
                    <div class="col-md-6">
                      <div class="card h-100">
                        <div class="card-body">
                          <h6 id="cognitive-distortion-3-title">Personalization</h6>
                          <p id="cognitive-distortion-3-desc">Taking excessive responsibility for external events</p>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="cognitive-distortion-3-check">
                            <label class="form-check-label" for="cognitive-distortion-3-check">Present in
                              patient</label>
                          </div>
                          <input type="text" class="form-control mt-2" placeholder="Examples from patient...">
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="card h-100">
                        <div class="card-body">
                          <h6 id="cognitive-distortion-4-title">Mind Reading</h6>
                          <p id="cognitive-distortion-4-desc">Assuming others' thoughts without evidence</p>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="cognitive-distortion-4-check">
                            <label class="form-check-label" for="cognitive-distortion-4-check">Present in
                              patient</label>
                          </div>
                          <input type="text" class="form-control mt-2" placeholder="Examples from patient...">
                        </div>
                      </div>
                    </div>
                  </div>

                  <h5 id="cognitive-thought-record-title">Thought Record</h5>
                  <div class="table-responsive mb-4">
                    <table class="table table-bordered">
                      <thead>
                        <tr>
                          <th>Situation</th>
                          <th>Automatic Thought</th>
                          <th>Emotion &amp; Intensity (0-100)</th>
                          <th>Evidence For</th>
                          <th>Evidence Against</th>
                          <th>Alternative Thought</th>
                          <th>New Emotion &amp; Intensity (0-100)</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>
                            <textarea class="form-control" rows="2" placeholder="Describe the situation..."></textarea>
                          </td>
                          <td>
                            <textarea class="form-control" rows="2" placeholder="What went through your mind?"></textarea>
                          </td>
                          <td>
                            <select class="form-select mb-1">
                              <option selected="">Choose emotion...</option>
                              <option>Sadness</option>
                              <option>Anxiety</option>
                              <option>Shame</option>
                              <option>Guilt</option>
                              <option>Anger</option>
                            </select>
                            <input type="number" class="form-control" min="0" max="100" placeholder="Intensity">
                          </td>
                          <td>
                            <textarea class="form-control" rows="2" placeholder="What supports this thought?"></textarea>
                          </td>
                          <td>
                            <textarea class="form-control" rows="2" placeholder="What contradicts this thought?"></textarea>
                          </td>
                          <td>
                            <textarea class="form-control" rows="2" placeholder="More balanced perspective?"></textarea>
                          </td>
                          <td>
                            <select class="form-select mb-1">
                              <option selected="">Choose emotion...</option>
                              <option>Sadness</option>
                              <option>Anxiety</option>
                              <option>Shame</option>
                              <option>Guilt</option>
                              <option>Anger</option>
                            </select>
                            <input type="number" class="form-control" min="0" max="100" placeholder="Intensity">
                          </td>
                        </tr>
                        <tr>
                          <td colspan="7">
                            <button class="btn btn-primary btn-sm">Add Row</button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>

                  <h5 id="cognitive-exercise-title">Cognitive Challenge Exercise</h5>
                  <div class="interactive-exercise">
                    <div class="mb-3">
                      <label for="core-belief" class="form-label">Identified Core Negative Belief:</label>
                      <input type="text" class="form-control" id="core-belief" placeholder="Enter core belief...">
                    </div>

                    <div class="mb-3">
                      <label class="form-label">Evidence Evaluation:</label>
                      <div class="input-group mb-2">
                        <span class="input-group-text">For</span>
                        <input type="text" class="form-control" placeholder="Add evidence supporting belief...">
                        <button class="btn btn-outline-secondary">Add</button>
                      </div>
                      <ul class="list-group mb-3" id="evidence-for-list">
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                          <span>Evidence item will appear here</span>
                          <button class="btn btn-sm btn-outline-danger">Remove</button>
                        </li>
                      </ul>

                      <div class="input-group mb-2">
                        <span class="input-group-text">Against</span>
                        <input type="text" class="form-control" placeholder="Add evidence contradicting belief...">
                        <button class="btn btn-outline-secondary">Add</button>
                      </div>
                      <ul class="list-group" id="evidence-against-list">
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                          <span>Evidence item will appear here</span>
                          <button class="btn btn-sm btn-outline-danger">Remove</button>
                        </li>
                      </ul>
                    </div>

                    <div class="mb-3">
                      <label for="alternative-belief" class="form-label">Alternative Balanced Belief:</label>
                      <input type="text" class="form-control" id="alternative-belief" placeholder="Enter alternative belief...">
                    </div>

                    <div class="mb-3">
                      <label for="belief-rating-before" class="form-label">Belief Strength (Before): <span id="belief-before-value">50</span>%</label>
                      <input type="range" class="form-range" id="belief-rating-before" min="0" max="100" value="50" oninput="document.getElementById('belief-before-value').textContent = this.value">
                    </div>

                    <div class="mb-3">
                      <label for="belief-rating-after" class="form-label">Belief Strength (After): <span id="belief-after-value">50</span>%</label>
                      <input type="range" class="form-range" id="belief-rating-after" min="0" max="100" value="50" oninput="document.getElementById('belief-after-value').textContent = this.value">
                    </div>
                  </div>

                  <div class="alert alert-secondary" id="cognitive-notes">
                    <strong>Clinical Notes:</strong> Module not yet started. Will focus on identifying key negative
                    thought patterns related to academic performance and social comparisons when initiated.
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="timeline-item">
            <span class="timeline-dot not-started"></span>
            
            <div class="card shadow-sm mb-4">
              <div class="card-header bg-light d-flex justify-content-between align-items-center" id="affectHeader" data-bs-toggle="collapse" data-bs-target="#affectContent" aria-expanded="false" aria-controls="affectContent" style="cursor: pointer;">
                <h5 class="mb-0">
                  <span class="text-black d-flex align-items-center fs-5">
                    <span>Affect regulation</span>
                  </span>
                </h5>
                <span class="badge bg-secondary text-white fs-6">Not Started</span>
              </div>
              <div id="affectContent" class="collapse" aria-labelledby="affectHeader">
                <div class="card-body">
                  <p id="affect-desc">This module focuses on developing skills to identify, understand, and manage
                    emotional responses.</p>

                  <h5 id="affect-awareness-title">Emotional Awareness</h5>
                  <p id="affect-awareness-text">Building the ability to recognize and name emotions as they occur.</p>

                  <div class="card mb-4">
                    <div class="card-body">
                      <h6 id="affect-daily-title">Daily Emotion Tracking</h6>

                      <div class="mb-3">
                        <label for="emotion-date" class="form-label">Date:</label>
                        <input type="date" class="form-control" id="emotion-date">
                      </div>

                      <div class="table-responsive">
                        <table class="table table-bordered">
                          <thead>
                            <tr>
                              <th>Time</th>
                              <th>Emotion</th>
                              <th>Intensity (1-10)</th>
                              <th>Trigger/Context</th>
                              <th>Body Sensations</th>
                              <th>Response</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td>
                                <input type="time" class="form-control">
                              </td>
                              <td>
                                <select class="form-select">
                                  <option selected="">Choose...</option>
                                  <option>Sadness</option>
                                  <option>Anxiety</option>
                                  <option>Anger</option>
                                  <option>Joy</option>
                                  <option>Fear</option>
                                  <option>Shame</option>
                                  <option>Guilt</option>
                                  <option>Other</option>
                                </select>
                              </td>
                              <td>
                                <input type="number" class="form-control" min="1" max="10">
                              </td>
                              <td>
                                <input type="text" class="form-control">
                              </td>
                              <td>
                                <input type="text" class="form-control">
                              </td>
                              <td>
                                <input type="text" class="form-control">
                              </td>
                            </tr>
                            <tr>
                              <td colspan="6">
                                <button class="btn btn-primary btn-sm">Add Entry</button>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>

                  <h5 id="affect-strategies-title">Emotion Regulation Strategies</h5>

                  <div class="row mb-4">
                    <div class="col-md-4 mb-3">
                      <div class="card h-100">
                        <div class="card-header bg-light">
                          <h6 class="mb-0">Breathing Techniques</h6>
                        </div>
                        <div class="card-body">
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="breathing-1">
                            <label class="form-check-label" for="breathing-1">4-7-8 Breathing</label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="breathing-2">
                            <label class="form-check-label" for="breathing-2">Box Breathing</label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="breathing-3">
                            <label class="form-check-label" for="breathing-3">Diaphragmatic Breathing</label>
                          </div>
                          <div class="mt-2">
                            <label class="form-label">Effectiveness Rating:</label>
                            <select class="form-select">
                              <option selected="">Select...</option>
                              <option>Not Tried</option>
                              <option>Not Effective (1-2)</option>
                              <option>Somewhat Effective (3-4)</option>
                              <option>Moderately Effective (5-6)</option>
                              <option>Very Effective (7-8)</option>
                              <option>Extremely Effective (9-10)</option>
                            </select>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="col-md-4 mb-3">
                      <div class="card h-100">
                        <div class="card-header bg-light">
                          <h6 class="mb-0">Mindfulness Practices</h6>
                        </div>
                        <div class="card-body">
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="mindfulness-1">
                            <label class="form-check-label" for="mindfulness-1">Body Scan</label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="mindfulness-2">
                            <label class="form-check-label" for="mindfulness-2">5 Senses Exercise</label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="mindfulness-3">
                            <label class="form-check-label" for="mindfulness-3">Guided Meditation</label>
                          </div>
                          <div class="mt-2">
                            <label class="form-label">Effectiveness Rating:</label>
                            <select class="form-select">
                              <option selected="">Select...</option>
                              <option>Not Tried</option>
                              <option>Not Effective (1-2)</option>
                              <option>Somewhat Effective (3-4)</option>
                              <option>Moderately Effective (5-6)</option>
                              <option>Very Effective (7-8)</option>
                              <option>Extremely Effective (9-10)</option>
                            </select>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="col-md-4 mb-3">
                      <div class="card h-100">
                        <div class="card-header bg-light">
                          <h6 class="mb-0">Physical Regulation</h6>
                        </div>
                        <div class="card-body">
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="physical-1">
                            <label class="form-check-label" for="physical-1">Progressive Muscle Relaxation</label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="physical-2">
                            <label class="form-check-label" for="physical-2">Cold Water Technique</label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="physical-3">
                            <label class="form-check-label" for="physical-3">Brief Exercise</label>
                          </div>
                          <div class="mt-2">
                            <label class="form-label">Effectiveness Rating:</label>
                            <select class="form-select">
                              <option selected="">Select...</option>
                              <option>Not Tried</option>
                              <option>Not Effective (1-2)</option>
                              <option>Somewhat Effective (3-4)</option>
                              <option>Moderately Effective (5-6)</option>
                              <option>Very Effective (7-8)</option>
                              <option>Extremely Effective (9-10)</option>
                            </select>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <h5 id="affect-crisis-title">Crisis Response Plan</h5>
                  <div class="interactive-exercise">
                    <div class="mb-3">
                      <label class="form-label">Warning Signs (check all that apply):</label>
                      <div class="row">
                        <div class="col-md-4">
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="warning-1">
                            <label class="form-check-label" for="warning-1">Isolation</label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="warning-2">
                            <label class="form-check-label" for="warning-2">Sleep disturbance</label>
                          </div>
                        </div>
                        <div class="col-md-4">
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="warning-3">
                            <label class="form-check-label" for="warning-3">Negative self-talk</label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="warning-4">
                            <label class="form-check-label" for="warning-4">Appetite changes</label>
                          </div>
                        </div>
                        <div class="col-md-4">
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="warning-5">
                            <label class="form-check-label" for="warning-5">Hopelessness</label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="warning-6">
                            <label class="form-check-label" for="warning-6">Other</label>
                            <input type="text" class="form-control mt-1" placeholder="Specify...">
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="mb-3">
                      <label for="coping-strategies" class="form-label">Coping Strategies to Use:</label>
                      <textarea class="form-control" id="coping-strategies" rows="3" placeholder="List personal coping strategies..."></textarea>
                    </div>

                    <div class="mb-3">
                      <label for="support-contacts" class="form-label">Support Contacts:</label>
                      <textarea class="form-control" id="support-contacts" rows="3" placeholder="List people who can help..."></textarea>
                    </div>

                    <div class="mb-3">
                      <label for="crisis-resources" class="form-label">Crisis Resources:</label>
                      <textarea class="form-control" id="crisis-resources" rows="3" disabled="">National Suicide Prevention Lifeline: 988
                                    Crisis Text Line: Text HOME to 741741
                                    Local Crisis Center: [To be filled by clinician]</textarea>
                    </div>
                  </div>

                  <div class="alert alert-secondary" id="affect-notes">
                    <strong>Clinical Notes:</strong> Module not yet started. Will focus on developing emotional
                    awareness and regulation strategies tailored to the patient's specific emotional triggers.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>


    <div id="treatment-goals" class="tab-content">
      <h3 cla="" ss="content-title">Treatment Plan</h3>
      
    </div>

  </div>
  
  

  <script>
    // Initialize tooltips
    document.addEventListener('DOMContentLoaded', function () {
      var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
      var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
      });
    }); function toggleTriggerTable() {
      $('#triggerTable').collapse('toggle');
    }

    function toggleEndSessionForm() {
      const form = document.getElementById("endSessionForm");
      form.classList.toggle("active");

      // If the form is now active (visible), scroll to center it
      if (form.classList.contains("active")) {
        // Wait a tiny bit for the form to be fully visible
        setTimeout(() => {
          // Get the form's position and dimensions
          const formRect = form.getBoundingClientRect();

          // Get the viewport height
          const viewportHeight = window.innerHeight;

          // Calculate the scroll adjustment to center the form
          // This takes the form's top position and adjusts it to center the form in the viewport
          const scrollAdjustment = formRect.top - (viewportHeight / 2) + (formRect.height / 2);

          // Scroll by that amount (smoothly)
          window.scrollBy({
            top: scrollAdjustment,
            behavior: 'smooth'
          });
        }, 50); // Small timeout to ensure the form is rendered
      }

      // Hide module form if it's open
      document.getElementById("endModuleForm").classList.remove("active");
    }

    function toggleEndModuleForm() {
      const form = document.getElementById("endModuleForm");
      form.classList.toggle("active");
      // Hide session form if it's open
      document.getElementById("endSessionForm").classList.remove("active");
    }

    function selectModule(element) {
      // Remove selected class from all options
      document.querySelectorAll(".module-option").forEach((option) => {
        option.classList.remove("selected");
      });
      // Add selected class to clicked option
      element.classList.add("selected");
    }

    function toggleObservationEdit() {
      const text = document.getElementById("observationText");
      const edit = document.getElementById("observationEdit");
      text.style.display = "none";
      edit.style.display = "block";
    } function saveObservation() {
      const text = document.getElementById("observationText");
      const edit = document.getElementById("observationEdit");
      const textarea = edit.querySelector("textarea");

      // Update the observation text, preserving the quote icons
      const quoteLeft = '<i class="fas fa-quote-left text-muted me-2"></i>';
      const quoteRight = '<i class="fas fa-quote-right text-muted ms-2"></i>';
      text.innerHTML = quoteLeft + textarea.value.trim() + quoteRight;

      text.style.display = "block";
      edit.style.display = "none";
    }

    function cancelObservation() {
      const text = document.getElementById("observationText");
      const edit = document.getElementById("observationEdit");
      text.style.display = "block";
      edit.style.display = "none";
    } function showModule(moduleId) {
      // Hide all modules
      document.querySelectorAll(".module-content").forEach((content) => {
        content.classList.remove("active");
      });
      // Show selected module
      document.getElementById(moduleId + "-module").classList.add("active");

      // Update horizontal tab styling
      document.querySelectorAll(".horizontal-tab").forEach((tab) => {
        tab.classList.remove("active");
      });
      event.currentTarget.classList.add("active");

      // If treatment plan is selected, show first tab by default
      if (moduleId === 'treatment' && document.querySelector("#treatment-module .tab-content.active") === null) {
        document.getElementById('treatment-overview').classList.add('active');
        document.querySelector("#treatment-module .vertical-tab").classList.add('active');
      }

      // If future module is selected, show first tab by default
      if (moduleId === 'future' && document.querySelector("#future-module .tab-content.active") === null) {
        document.getElementById('future-plans').classList.add('active');
        document.querySelector("#future-module .vertical-tab").classList.add('active');
      }
    }

    function showContent(contentId, moduleId) {
      // Hide all content within the current module
      document
        .querySelectorAll(`#${moduleId}-module .tab-content`)
        .forEach((content) => {
          content.classList.remove("active");
        });
      // Show selected content
      document.getElementById(contentId).classList.add("active");

      // Update vertical tab styling within the current module
      document
        .querySelectorAll(`#${moduleId}-module .vertical-tab`)
        .forEach((tab) => {
          tab.classList.remove("active");
        });
      event.currentTarget.classList.add("active");
    }

    // Keyboard navigation
    document.addEventListener("keydown", function (event) {
      if (event.key >= "1" && event.key <= "3") {
        const modules = ["current", "future", "previous"];
        const index = parseInt(event.key) - 1;
        if (index < modules.length) {
          showModule(modules[index]);
          const button = document.querySelector(
            `button[onclick="showModule('${modules[index]}')"]`
          );
          if (button) button.focus();
        }
      }
    });

    // Initialize anxiety chart
    document.addEventListener("DOMContentLoaded", function () {
      const ctx = document.getElementById("anxietyChart").getContext("2d");
      new Chart(ctx, {
        type: "bar",
        data: {
          labels: [
            "Mon 05.05",
            "Tue 06.05",
            "Wed 07.05",
            "Thu 08.05",
            "Fri 09.05",
            "Sat 10.05",
            "Sun 11.05",
          ],
          datasets: [
            {
              label: "Anxiety Level",
              data: [2, 4, 5, 5, 8, 6, 2],
              backgroundColor: "rgba(124, 123, 173, 0.6)",
              borderColor: "rgba(124, 123, 173, 1)",
              borderWidth: 1,
            },
          ],
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
              max: 10,
              grid: {
                display: false,
              },
            },
            x: {
              grid: {
                display: false,
              },
            },
          },
          responsive: true,
          maintainAspectRatio: true,
          aspectRatio: 2,
          plugins: {
            legend: {
              display: false,
            },
          },
        },
      });
    });

    // Add event listeners for comment buttons
    document.addEventListener("DOMContentLoaded", function () {
      const addCommentBtns = document.querySelectorAll(".add-comment-btn");
      const cancelCommentBtns = document.querySelectorAll(
        ".cancel-comment-btn"
      );

      addCommentBtns.forEach((btn) => {
        btn.addEventListener("click", function () {
          const taskId = this.dataset.taskId;
          document.getElementById(`comment-form-${taskId}`).style.display =
            "block";
        });
      });

      cancelCommentBtns.forEach((btn) => {
        btn.addEventListener("click", function () {
          const taskId = this.closest("form").dataset.taskId;
          document.getElementById(`comment-form-${taskId}`).style.display =
            "none";
        });
      });
    });

    const sessionData = {
      session1: {
        title: "Psychoeducation: Understanding Anxiety of your child",
        date: "10 May 2025",
        duration: "1 h (15:30 - 16:30)",
        effectiveness: "85%",
        goal: "Introduced the concept of anxiety, its causes, symptoms, and impact on children's daily lives. Explained the fight-or-flight response and how it manifests in children.",
        exercises: [
          { name: "Observe and record situations where the child shows signs of anxiety.", status: "completed" },
          { name: "Reflect on how they respond to these situations and what consequences follow.", status: "completed" },
        ],
        objectives: [
          { name: "Understand what anxiety is and how it affects children." },
          { name: "Recognize the role of avoidance in maintaining anxiety." },
          { name: "Introduce the ABC model (Antecedent, Behavior, Consequence) to help parents analyze their child's behavior." },
        ],
        observations:
          "Parents engaged actively and showed interest in understanding anxiety.",
        chartData: {
          labels: ["Calm", "Anxiety", "Concentration", "Mood"],
          data: [80, 45, 75, 85],
        },
      },
      session2: {
        title: "Child Session: Understanding and Coping with Anxiety",
        date: "11 May 2025",
        duration: "1 h (14:00 - 15:00)",
        effectiveness: "90%",
        goal: "Engaged the child in a conversation about their feelings of anxiety. Explained what anxiety is in child-friendly terms, identified situations that cause worry, and introduced strategies to manage it using thought-emotion-alternative mapping.",
        exercises: [
          {
            name: "Use the 'Thought – Emotion – Alternative Thought' model to reframe one anxious thought.",
            status: "assigned"
          }
        ],
        objectives: [
          { name: "Help the child identify what anxiety feels like in their body and mind." },
          { name: "Teach the child how thoughts influence emotions." },
          { name: "Introduce the basic cognitive model: Thought → Emotion → Alternative Thought." }
        ],
        observations:
          "The child was able to name situations that made them anxious and described physical symptoms (e.g., stomach ache, tight chest). Responded well to drawing and role-play. Curious about how thoughts can be changed.",
        chartData: {
          labels: ["Calm", "Anxiety", "Concentration", "Mood"],
          data: [70, 55, 65, 75]
        }
      }
    }; function showSessionDetails(sessionId) {
      const session = sessionData[sessionId];
      if (!session) return;

      document.getElementById("sessions-list").style.display = "none";
      document.getElementById("session-details").style.display = "block";

      // Update session details
      document.getElementById("session-title").textContent = session.title;
      document.getElementById("session-date").textContent = session.date;
      document.getElementById("session-duration").textContent = session.duration;
      document.getElementById("session-effectiveness").textContent = session.effectiveness;

      // Update goal
      document.getElementById("session-goal").textContent = session.goal;

      // Update objectives
      const objectivesHtml = session.objectives
        .map(
          (objective) => `
              <li class="mb-2">
                <i class="fas fa-check-circle text-success me-2"></i>
                ${objective.name}
              </li>
            `
        )
        .join("");
      document.getElementById("session-objectives").innerHTML = objectivesHtml;

      // Update exercises
      const exercisesHtml = session.exercises
        .map(
          (exercise) => `
              <div class="d-flex align-items-center mb-2 p-2 bg-light rounded">
                <i class="fas fa-${exercise.status === "completed" ? "check-circle text-success" :
              exercise.status === "in progress" ? "clock text-warning" :
                "circle text-muted"
            } me-2"></i>
                <div class="flex-grow-1">
                  <div>${exercise.name}</div>
                </div>
                <span class="badge ${exercise.status === "completed" ? "bg-success" :
              exercise.status === "in progress" ? "bg-warning" :
                "bg-secondary"
            }">${exercise.status.charAt(0).toUpperCase() + exercise.status.slice(1)}</span>
              </div>
            `
        )
        .join("");
      document.getElementById("session-exercises").innerHTML = exercisesHtml;

      // Update observations
      document.getElementById("session-observations").textContent =
        session.observations;

      // Update chart
      const ctx = document.getElementById("sessionChart").getContext("2d");
      new Chart(ctx, {
        type: "radar",
        data: {
          labels: session.chartData.labels,
          datasets: [
            {
              label: "Session metrics",
              data: session.chartData.data,
              fill: true,
              backgroundColor: "rgba(124, 123, 173, 0.2)",
              borderColor: "#7C7BAD",
              pointBackgroundColor: "#7C7BAD",
            },
          ],
        },
        options: {
          scales: {
            r: {
              min: 0,
              max: 100,
              ticks: {
                stepSize: 20,
              },
            },
          },
        },
      });
    }

    function showSessionsList() {
      document.getElementById("sessions-list").style.display = "block";
      document.getElementById("session-details").style.display = "none";
    }

    // Interactive Diagram Functions
    document.addEventListener('DOMContentLoaded', function () {
      loadSavedText('thoughts');
      loadSavedText('behaviors');
      loadSavedText('feelings');
    });

    function toggleTextArea(id) {
      // Remove active class from all hexagons
      document.querySelectorAll('.hexagon').forEach(hex => {
        hex.classList.remove('active');
      });

      // Add active class to clicked hexagon
      document.getElementById(id).classList.add('active');

      // Hide all text areas
      document.querySelectorAll('.text-area-container').forEach(container => {
        container.style.display = 'none';
      });

      // Show selected text area with fade effect
      const selectedContainer = document.getElementById(id + '-text-container');
      if (selectedContainer) {
        selectedContainer.style.opacity = '0';
        selectedContainer.style.display = 'block';
        setTimeout(() => {
          selectedContainer.style.transition = 'opacity 0.3s ease';
          selectedContainer.style.opacity = '1';
        }, 50);
        document.getElementById(id + '-text').focus();
      }
    }

    function saveText(id) {
      const textarea = document.getElementById(id + '-text');
      const text = textarea.value;

      // Save to localStorage
      localStorage.setItem(id + '-thoughts-behavior-feelings', text);

      // Show success message
      const button = textarea.nextElementSibling;
      const originalText = button.innerHTML;
      button.innerHTML = '<i class="fas fa-check me-2"></i>Збережено!';
      button.disabled = true;

      // Reset button after 2 seconds
      setTimeout(() => {
        button.innerHTML = originalText;
        button.disabled = false;
      }, 2000);
    }

    function loadSavedText(id) {
      const savedText = localStorage.getItem(id + '-thoughts-behavior-feelings');
      if (savedText) {
        document.getElementById(id + '-text').value = savedText;
      }
    }

    // Add this to your existing JavaScript
    function toggleModuleDetails(element, moduleId) {
      const details = element.querySelector('.module-details');
      const icon = element.querySelector('.module-expand-icon');

      // Toggle the expanded class
      element.classList.toggle('expanded');

      // If details are hidden, show them with animation
      if (details.style.display === 'none') {
        details.style.display = 'block';
        details.style.opacity = '0';
        setTimeout(() => {
          details.style.opacity = '1';
        }, 10);
      } else {
        // If details are shown, hide them with animation
        details.style.opacity = '0';
        setTimeout(() => {
          details.style.display = 'none';
        }, 300);
      }
    }

    // Initialize charts
    document.addEventListener("DOMContentLoaded", function () {
      // Weekly Progress Chart
      const weeklyCtx = document.getElementById("weeklyProgressChart").getContext("2d");
      new Chart(weeklyCtx, {
        type: "line",
        data: {
          labels: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
          datasets: [{
            label: "Tasks Completed",
            data: [4, 6, 5, 8, 7, 3, 5],
            borderColor: "#7c7bad",
            backgroundColor: "rgba(124, 123, 173, 0.1)",
            tension: 0.4,
            fill: true
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: "top",
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              max: 10
            }
          }
        }
      });

      // Emotional State Chart
      const emotionalCtx = document.getElementById("emotionalStateChart").getContext("2d");
      new Chart(emotionalCtx, {
        type: "radar",
        data: {
          labels: ["Anxiety", "Happiness", "Stress", "Confidence", "Energy", "Focus"],
          datasets: [{
            label: "This Week",
            data: [3, 7, 4, 8, 6, 7],
            backgroundColor: "rgba(124, 123, 173, 0.2)",
            borderColor: "#7c7bad",
            pointBackgroundColor: "#7c7bad"
          },
          {
            label: "Last Week",
            data: [5, 5, 6, 4, 5, 5],
            backgroundColor: "rgba(255, 193, 7, 0.2)",
            borderColor: "#ffc107",
            pointBackgroundColor: "#ffc107"
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            r: {
              beginAtZero: true,
              max: 10,
              ticks: {
                stepSize: 2
              }
            }
          }
        }
      });
    });

    function toggleStory(button) {
      const story = button.previousElementSibling;
      const icon = button.querySelector('.expand-icon');
      const text = button.querySelector('.expand-text');

      story.classList.toggle('collapsed');
      icon.classList.toggle('rotated');

      if (story.classList.contains('collapsed')) {
        text.textContent = 'Show more';
      } else {
        text.textContent = 'Hide';
      }
    }


    const vertexData = {
      thought: [
        "I'm going to fail math test",
        "Everyone else is smarter than me",
      ],
      emotion: ["Scared", "Nervous", "Sad"],
      behavior: ["Hiding in my room", "Not wanting to go to school"],
    };

    function addVertexListItem(type, e) {
      e.stopPropagation();
      const input = document.getElementById(type + "-input");
      input.classList.remove("d-none");
      input.focus();
    }

    function toggleVertexGlowEffect(type, e) {
      e.stopPropagation();
      const wrapperId = type + "-wrapper";
      const wrapper = document.getElementById(wrapperId);
      wrapper.classList.toggle("glow-effect");
    }

    function triangleContainerClick(event) {
      document.querySelectorAll(".glow-effect").forEach((el) => {
        el.classList.remove("glow-effect");
      });
    }

    function renderVertexList(type) {
      const listId = type + "List";
      const ul = document.getElementById(listId);
      ul.innerHTML = "";
      vertexData[type].forEach((item) => {
        const li = document.createElement("li");
        li.className =
          "list-group-item list-item-bg text-break text-white dark-border";
        li.innerHTML = "&#x2022; " + item;
        ul.appendChild(li);
      });
    }

    function vertexInputClick(e) {
      e.stopPropagation();
    }

    function vertexInputKeyDown(type, e) {
      if (event.key === "Enter") {
        const input = document.getElementById(type + "-input");
        const value = input.value.trim();
        if (value !== "") {
          vertexData[type].push(value);
          renderVertexList(type);
          input.value = "";
          input.classList.add("d-none");
        } else {
          input.classList.add("d-none");
        }
      }
    }

    document.addEventListener("DOMContentLoaded", function () {
      renderVertexList("thought");
      renderVertexList("emotion");
      renderVertexList("behavior");
    });
  </script>